<html>
  <body>
    <div
      id="main-content"
      data-inline-comments-target="true"
      class="wiki-content"
    >
      <div class="contentLayout2">
        <div
          class="columnLayout two-right-sidebar"
          data-layout="two-right-sidebar"
        >
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <div
                class="confluence-information-macro has-no-icon confluence-information-macro-note conf-macro output-block"
                data-hasbody="true"
                data-macro-name="note"
                data-macro-id="d94c1bd1-1613-4a05-a9ab-c5b22fe6a9b1"
              >
                <div class="confluence-information-macro-body">
                  <p>
                    <span data-colorid="fhbvluqe6w">March 31st, 2022:</span
                    ><span style="letter-spacing: 0px">
                      Ed-Fi Alliance announced
                      <a
                        href="https://edfi.atlassian.net/wiki/pages/viewpage.action?pageId=20875055"
                        rel="nofollow"
                      >
                        end of life</a
                      >
                      for ODS Migration utility. While the utility could be used
                      for upgrade to </span
                    ><a href="/wiki/spaces/ODSAPIS3V53">Ed-Fi ODS / API v5.3</a
                    ><span style="letter-spacing: 0px">
                      version for both SQL Server and PostgreSQL, there will be
                      no </span
                    ><span data-colorid="xgpkul5moq" style="letter-spacing: 0px"
                      >new migration support or enhancements to this
                      product.</span
                    ><span data-colorid="df0cna3akx" style="letter-spacing: 0px"
                      >&nbsp;</span
                    >
                  </p>
                </div>
              </div>
              <div
                class="panel conf-macro output-block"
                style="
                  background-color: #ffedc4;
                  border-color: #fec43d;
                  border-style: solid;
                  border-width: 1px;
                "
                data-hasbody="true"
                data-macro-name="panel"
                data-macro-id="05c060de-0c35-4931-aeed-9888f809a1cc"
              >
                <div
                  class="panelHeader"
                  style="
                    border-bottom-width: 1px;
                    border-bottom-style: solid;
                    border-bottom-color: #fec43d;
                    background-color: #fec43d;
                    color: #000;
                  "
                >
                  <b>Downloads</b>
                </div>
                <div class="panelContent" style="background-color: #ffedc4">
                  <p>
                    Ed-Fi ODS Migration Utility binaries:&nbsp;<a
                      href="https://pkgs.dev.azure.com/ed-fi-alliance/Ed-Fi-Alliance-OSS/_apis/packaging/feeds/EdFi/nuget/packages/EdFi.Suite3.Ods.Utilities.Migration/versions/2.2.1/content"
                      class="external-link"
                      rel="nofollow"
                      >EdFi.Suite3.Ods.Utilities.Migration v2.2</a
                    >&nbsp;(Prerequisite: .NET Core 3.1 SDK)
                  </p>
                  <p>
                    Ed-Fi ODS Migration Utility source code, hosted on Ed-Fi
                    Alliance GitHub:&nbsp;<a
                      href="https://github.com/Ed-Fi-Exchange-OSS/Ed-Fi-MigrationUtility"
                      class="external-link"
                      rel="nofollow"
                      >https://github.com/Ed-Fi-Exchange-OSS/Ed-Fi-MigrationUtility</a
                    >
                  </p>
                  <p>
                    Example calendar configuration files:&nbsp;<a
                      href="https://github.com/Ed-Fi-Exchange-OSS/Ed-Fi-MigrationUtility/tree/main/EdFi.Ods.Utilities.Migration/Sample%20Calendar%20Config"
                      class="external-link"
                      rel="nofollow"
                      >Sample Calendar Config</a
                    >
                  </p>
                </div>
              </div>

              <h1 id="MigrationUtility-Overview">Overview</h1>
              <p>
                The ODS Migration Utility is a command-line tool built to
                upgrade the schema of an ODS instance up to the latest version,
                along with data migration.
              </p>
              <p>
                It currently supports data migration from<span>&nbsp;</span
                ><a
                  style="text-decoration: none"
                  href="https://edfi.atlassian.net/wiki/display/EFDS20/"
                  rel="nofollow"
                  >Ed-Fi Data Standard v2.0</a
                ><span>&nbsp;</span>and<span>&nbsp;</span
                ><a
                  style="text-decoration: none"
                  href="https://edfi.atlassian.net/wiki/display/EFDS22/"
                  rel="nofollow"
                  >Ed-Fi Data Standard v2.2</a
                ><span>&nbsp;</span>to<span>&nbsp;</span
                ><a
                  href="https://edfi.atlassian.net/wiki/display/EFDS33/Ed-Fi+Data+Standard+v3.3"
                  rel="nofollow"
                  >Ed-Fi Data Standard v3.3</a
                >. The utility has out-of-the-box support for migrating an
                as-shipped ODS to the latest version. With additional customized
                scripting, the Migration Utility can be easily adapted and used
                to migrate extended ODS instances. ODS shared instances may take
                advantage of this utility.&nbsp;<span
                  >For year-specific instances, migration may not be a concern
                  as a new ODS is created at the beginning of every school
                  year.</span
                >
              </p>
              <p>Contents:</p>
              <p></p>
              <div
                class="toc-macro client-side-toc-macro conf-macro output-block hidden-outline"
                data-headerelements="H1"
                data-excludeheaderregex="Overview"
                data-hasbody="false"
                data-macro-name="toc"
                data-macro-id="5e80f519-9847-4f9b-8e1c-4ba8fed19d9e"
                resolved=""
              >
                <ul style="">
                  <li>
                    <span class="toc-item-body" data-outline="1"
                      ><span class="toc-outline">1</span
                      ><a
                        href="#MigrationUtility-UsageScenarios"
                        class="toc-link"
                        ><span>Usage Scenarios</span></a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="2"
                      ><span class="toc-outline">2</span
                      ><a
                        href="#MigrationUtility-DeveloperQuickStart"
                        class="toc-link"
                        >Developer Quick Start</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="3"
                      ><span class="toc-outline">3</span
                      ><a
                        href="#MigrationUtility-UsageWalkthrough"
                        class="toc-link"
                        >Usage Walkthrough</a
                      ></span
                    >
                  </li>
                </ul>
              </div>
              <p></p>
              <h1 id="MigrationUtility-UsageScenarios">
                <span>Usage Scenarios</span>
              </h1>
              <p>
                The following table summarizes the supported scenarios for the
                migration utility:
              </p>
              <div class="table-wrap">
                <table
                  class="relative-table wrapped confluenceTable"
                  style="width: 923.2px"
                  resolved=""
                >
                  <colgroup>
                    <col style="width: 0px" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 0px" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 0px" />
                  </colgroup>
                  <thead>
                    <tr>
                      <th style="text-align: left" class="confluenceTh">
                        <p>Database Type</p>
                      </th>
                      <th style="text-align: left" class="confluenceTh">
                        <p>Databases</p>
                      </th>
                      <th style="text-align: left" class="confluenceTh">
                        <p>Upgrade/Migration strategy</p>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td style="text-align: left" class="confluenceTd">
                        <p>
                          <strong>Core Databases</strong><span>&nbsp;</span
                          ><br /><span
                            >Databases that surface the Ed-Fi model and store
                            user data.</span
                          >
                        </p>
                      </td>
                      <td style="text-align: left" class="confluenceTd">
                        <p>EdFi_Ods, EdFi_Ods_YYYY, EdFi_Ods_Sandbox</p>
                      </td>
                      <td style="text-align: left" class="confluenceTd">
                        <p>
                          <span
                            >The current migration utility release&nbsp;
                            supports an&nbsp;</span
                          >in-place<span>&nbsp;</span><span>upgrade</span
                          ><span>&nbsp;</span>for the following upgrade paths
                          for SQL Server:
                        </p>
                        <p>
                          2.4 -&gt; 5.3<br /><span>2.5 -&gt; 5.3<br /></span
                          ><span>3.0 -&gt; 5.3</span>
                        </p>
                        <p>and following upgrade path for PostgreSQL:</p>
                        <p><span>3.4 -&gt; 5.3</span></p>
                        <p><br /></p>
                        <p>
                          <span>The migration utility also s</span
                          ><span
                            >upports migrating extensions with additional custom
                            scripts.</span
                          >
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td style="text-align: left" class="confluenceTd">
                        <p>
                          <strong>Support Databases</strong><br /><span
                            >Databases that provide supporting functions and
                            store user data.</span
                          >
                        </p>
                      </td>
                      <td style="text-align: left" class="confluenceTd">
                        <p>EdFi_Admin, EdFi_Security, EdFi_Bulk</p>
                      </td>
                      <td style="text-align: left" class="confluenceTd">
                        <p>
                          These databases can either be recreated, or database
                          deployment tool can be used to migrate them.
                        </p>
                      </td>
                    </tr>
                    <tr>
                      <td style="text-align: left" class="confluenceTd">
                        <p>
                          <strong>Transient Databases</strong><br /><span
                            >Databases that either surface the Ed-Fi model or
                            perform supporting functions, but do not have user
                            data persistence requirements.</span
                          >
                        </p>
                      </td>
                      <td style="text-align: left" class="confluenceTd">
                        <p>
                          EdFi_ODS_Empty, EdFi_Ods_Minimal_Template
                          EdFi_Ods_Populated_Template
                        </p>
                      </td>
                      <td style="text-align: left" class="confluenceTd">
                        <p>No upgrade supported.</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p><br /></p>
              <h1 id="MigrationUtility-DeveloperQuickStart">
                Developer Quick Start
              </h1>
              <p>The basic steps are simple:</p>
              <ul>
                <li>
                  Restore a backup copy of the target ODS to your local SQL
                  Server instance. We recommend:
                  <ul>
                    <li>
                      Start with the basic suite 2 ODS:&nbsp;Sample ODS
                      Download:&nbsp;<a
                        href="https://www.myget.org/feed/ed-fi/package/nuget/EdFi.Samples.Ods/2.0.0.21"
                        class="external-link"
                        rel="nofollow"
                        >EdFi.Samples.Ods/2.0.0.21</a
                      >.&nbsp;This is a small sample ODS, ideal for initial
                      development and testing.
                    </li>
                    <li>
                      Move on to the larger suite 2 ODS:&nbsp;<a
                        href="https://s3-us-west-2.amazonaws.com/edfidata/ETL+Development/EdFi_Glendale_v20-20180613.7z"
                        class="external-link"
                        rel="nofollow"
                        >Glendale 2.0 ODS Backup (created 2018-06-13)</a
                      >. This is a much larger ODS containing sample data,
                      useful for validation and QA.
                    </li>
                  </ul>
                </li>
                <li>
                  Make sure
                  <a
                    class="external-link"
                    style="text-decoration: none"
                    href="https://dotnet.microsoft.com/download/dotnet-core/3.1"
                    rel="nofollow"
                    >.NET Core 3.1 SDK</a
                  >&nbsp;is installed.
                </li>
                <li>
                  <span
                    >Choose one of the two options below to launch the migration
                    utility:</span
                  >
                </li>
              </ul>
              <div
                id="expander-249056554"
                class="expand-container conf-macro output-block"
                data-hasbody="true"
                data-macro-name="expand"
                data-macro-id="5bdcfe20-8398-4678-a057-f33dded6db21"
                resolved=""
              >
                <div id="expander-control-249056554" class="expand-control">
                  <span class="expand-control-icon icon">&nbsp;</span
                  ><span class="expand-control-text"
                    >Option 1: Test Directly From the Console (Click to
                    expand)</span
                  >
                </div>
                <div
                  id="expander-content-249056554"
                  class="expand-content expand-hidden"
                >
                  <p>
                    <strong>Step 1.</strong> Install the Ed-Fi ODS Migration
                    tool:
                  </p>
                  <div
                    class="panel conf-macro output-block"
                    style="border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="panel"
                    data-macro-id="c86f8873-0f04-493d-a50e-30465b49e4ec"
                  >
                    <div class="panelContent">
                      <p style="text-align: left">
                        <code style="text-align: left" class="text plain"
                          >c:\&gt;mkdir {YourInstallFolder}</code
                        ><br /><code style="text-align: left" class="text plain"
                          >c:\&gt;dotnet tool install
                          EdFi.Suite3.Ods.Utilities.Migration --tool-path
                          {YourInstallFolder}
                          <code
                            style="text-align: left"
                            class="powershell plain"
                            >-</code
                          ><code
                            style="text-align: left"
                            class="powershell keyword"
                            >-version</code
                          ><span data-colorid="dkn3gldga5"
                            ><span>&nbsp;</span></span
                          ><code
                            style="text-align: left"
                            class="powershell plain"
                            >2.2.*</code
                          ></code
                        >
                      </p>
                    </div>
                  </div>
                  <p class="auto-cursor-target">
                    Note: As onetime setup, you may need to add Ed-Fi package
                    source by running the following&nbsp; command in
                    PowerShell<span data-colorid="pzn9gxuihf"
                      >prompt using the following command</span
                    >:&nbsp;&nbsp;
                  </p>
                  <div
                    class="code panel pdl conf-macro output-block"
                    style="border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="code"
                    data-macro-id="16428073-49cf-4e29-a2a0-bdafdaf733f1"
                  >
                    <div class="codeContent panelContent pdl">
                      <div>
                        <div
                          id="highlighter_805375"
                          class="syntaxhighlighter sh-confluence nogutter powershell"
                        >
                          <div class="toolbar">
                            <span
                              ><a
                                href="#"
                                class="toolbar_item command_help help"
                                >?</a
                              ></span
                            >
                          </div>
                          <table border="0" cellpadding="0" cellspacing="0">
                            <tbody>
                              <tr>
                                <td class="code">
                                  <div
                                    class="container"
                                    title="Hint: double-click to select code"
                                  >
                                    <div
                                      class="line number1 index0 alt2"
                                      data-bidi-marker="true"
                                    >
                                      <code class="powershell plain">if (</code
                                      ><code class="powershell keyword"
                                        >-not</code
                                      >
                                      <code class="powershell plain"
                                        >[Net.ServicePointManager]::SecurityProtocol.HasFlag([Net.SecurityProtocolType]::Tls12))
                                        {</code
                                      >
                                    </div>
                                    <div
                                      class="line number2 index1 alt1"
                                      data-bidi-marker="true"
                                    >
                                      <code class="powershell spaces"
                                        >&nbsp;&nbsp;&nbsp;</code
                                      ><code class="powershell plain"
                                        >[Net.ServicePointManager]::SecurityProtocol
                                        +=
                                        [Net.SecurityProtocolType]::Tls12</code
                                      >
                                    </div>
                                    <div
                                      class="line number3 index2 alt2"
                                      data-bidi-marker="true"
                                    >
                                      <code class="powershell plain">}</code>
                                    </div>
                                    <div
                                      class="line number4 index3 alt1"
                                      data-bidi-marker="true"
                                    >
                                      <code class="powershell plain"
                                        >Register</code
                                      ><code class="powershell keyword"
                                        >-PackageSource</code
                                      >&nbsp;<code class="powershell keyword"
                                        >-Name</code
                                      >
                                      <code class="powershell plain">Ed</code
                                      ><code class="powershell keyword"
                                        >-FiAzureArtifacts</code
                                      >
                                      <code class="powershell keyword"
                                        >-Location</code
                                      >&nbsp;<code class="powershell plain"
                                        ><a href="https://pkgs.dev.azure.com/ed"
                                          >https://pkgs.dev.azure.com/ed</a
                                        ></code
                                      ><code class="powershell keyword"
                                        >-fi</code
                                      ><code class="powershell keyword"
                                        >-alliance</code
                                      ><code class="powershell plain">/Ed</code
                                      ><code class="powershell keyword"
                                        >-Fi</code
                                      ><code class="powershell keyword"
                                        >-Alliance</code
                                      ><code class="powershell keyword"
                                        >-OSS</code
                                      ><code class="powershell plain"
                                        >/_packaging/EdFi/nuget/v3/index.json&nbsp;</code
                                      ><code class="powershell keyword"
                                        >-ProviderName</code
                                      >
                                      <code class="powershell plain"
                                        >NuGet</code
                                      >
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                  <p>
                    <strong>Step 2.</strong
                    ><span>
                      Open a console window and change to the directory
                      containing the executable</span
                    >
                  </p>
                  <div
                    class="panel conf-macro output-block"
                    style="border-style: dashed; border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="panel"
                    data-macro-id="bc29849e-5915-4fef-bacf-ef9be4981935"
                  >
                    <div class="panelContent">
                      <p>
                        <code
                          >CD {<code style="text-align: left" class="text plain"
                            >YourInstallFolder</code
                          >}</code
                        >
                      </p>
                    </div>
                  </div>
                  <p class="auto-cursor-target">
                    <span
                      ><strong>Step 3.</strong> Launch the upgrade tool from the
                      command line</span
                    >
                  </p>
                  <div
                    class="panel conf-macro output-block"
                    style="border-style: dashed; border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="panel"
                    data-macro-id="5c324dd9-96d3-4d94-b3b1-bcceeb646c28"
                  >
                    <div
                      class="panelHeader"
                      style="
                        border-bottom-width: 1px;
                        border-bottom-style: dashed;
                      "
                    >
                      <b>Example Command Line Arguments: Grand Bend ODS</b>
                    </div>
                    <div class="panelContent">
                      <p>
                        <code
                          >.\EdFi.Ods.Utilities.Migration&nbsp;--DATABASE
                          "YOUR_DATABASE_CONNECTION_STRING_HERE"
                          --DescriptorNamespace "<a rel="nofollow"
                            >uri://grandbend.org</a
                          >" --CredentialNamespace "<a rel="nofollow"
                            >uri://grandbend.org</a
                          >"&nbsp;--Engine "YOUR_DATABASE_ENGINE_TYPE"<br
                        /></code>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
              <div
                id="expander-824175625"
                class="expand-container conf-macro output-block"
                data-hasbody="true"
                data-macro-name="expand"
                data-macro-id="d967913a-b60a-43a9-adb8-2f5be0a3a054"
                resolved=""
              >
                <div id="expander-control-824175625" class="expand-control">
                  <span class="expand-control-icon icon">&nbsp;</span
                  ><span class="expand-control-text"
                    >Option 2: Launch from Visual Studio for debugging (Click to
                    expand)</span
                  >
                </div>
                <div
                  id="expander-content-824175625"
                  class="expand-content expand-hidden"
                >
                  <p>
                    <strong>Step 1.&nbsp;</strong>Clone git repository:&nbsp;<a
                      href="https://github.com/Ed-Fi-Exchange-OSS/Ed-Fi-MigrationUtility"
                      class="external-link"
                      rel="nofollow"
                      >https://github.com/Ed-Fi-Exchange-OSS/Ed-Fi-MigrationUtility</a
                    >
                  </p>
                  <p>
                    <strong>Step 2.</strong> Open the Visual Studio solution
                    file,&nbsp;<code>Migration.sln</code>.
                  </p>
                  <p>
                    <strong>Step 3.</strong> Set up command line input for
                    debugging in Visual Studio 2019:
                  </p>
                  <ul>
                    <li>
                      <p>
                        Right click
                        the&nbsp;<code>EdFi.Ods.Utilities.Migration</code>&nbsp;project.
                      </p>
                    </li>
                    <li>Select <strong>properties</strong>.</li>
                    <li>Select <strong>debug</strong>.</li>
                    <li>
                      <p class="auto-cursor-target">
                        Add command line arguments:
                      </p>
                    </li>
                  </ul>
                  <div
                    class="panel conf-macro output-block"
                    style="border-style: dashed; border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="panel"
                    data-macro-id="8aa4f1fb-659a-4fdc-9460-6bde50bbc671"
                  >
                    <div
                      class="panelHeader"
                      style="
                        border-bottom-width: 1px;
                        border-bottom-style: dashed;
                      "
                    >
                      <b>Example Command Line Arguments: Grand Bend ODS</b>
                    </div>
                    <div class="panelContent">
                      <p>
                        <code
                          >--DATABASE "YOUR_DATABASE_CONNECTION_STRING_HERE"
                          --DescriptorNamespace "<a rel="nofollow"
                            >uri://grandbend.org</a
                          >" --CredentialNamespace "<a rel="nofollow"
                            >uri://grandbend.org</a
                          >"&nbsp;--Engine "YOUR_DATABASE_ENGINE_TYPE"<br
                        /></code>
                      </p>
                    </div>
                  </div>
                  <p>
                    <strong>Step 4.</strong> Set the
                    <code>EdFi.Ods.Utilities.Migration</code>&nbsp;project as
                    your startup project.
                  </p>
                  <p>
                    <span
                      ><strong>Step 5.</strong> Launch in debug mode
                      (<strong>F5</strong>).</span
                    >
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="columnLayout single" data-layout="single">
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-DevelopmentOverview:TheBasics">
                Development Overview: The Basics
              </h2>
              <p>
                The table below describes files and folders used by the
                Migration Utility along with a description and purpose for each
                resource.
              </p>
              <div class="table-wrap">
                <table
                  class="wrapped confluenceTable tablesorter tablesorter-default"
                  resolved=""
                  role="grid"
                >
                  <colgroup>
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr role="row" class="tablesorter-headerRow">
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="0"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Overview Item: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Overview Item
                      </th>
                      <th
                        colspan="1"
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="1"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Needed by Whom?: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Needed by Whom?
                      </th>
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="2"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Brief Description &amp; Purpose: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Brief Description &amp; Purpose
                      </th>
                    </tr>
                  </thead>
                  <tbody aria-live="polite" aria-relevant="all">
                    <tr role="row">
                      <td class="confluenceTd">
                        <p>
                          <strong>Script Directory</strong>:<br /><span
                            >\Scripts</span
                          >
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <ul>
                          <li>
                            <span class="legacy-color-text-green4"
                              ><strong
                                >Users writing custom upgrade scripts</strong
                              ></span
                            >
                          </li>
                          <li>Maintainers of the upgrade utility</li>
                        </ul>
                      </td>
                      <td class="confluenceTd">
                        <ul>
                          <li>
                            All database upgrade scripts go here, including:
                            <ul>
                              <li>Ed-Fi upgrade scripts.</li>
                              <li>Custom upgrade scripts (user extensions).</li>
                              <li>Compatibility checks.</li>
                              <li>Dynamic / SQL-based validation.</li>
                            </ul>
                          </li>
                          <li>
                            Subdirectories contain code for each supported ODS
                            upgrade version.
                          </li>
                        </ul>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Directory</strong>:<br /><span
                            >\Descriptors</span
                          >
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <ul>
                          <li>Maintainers of the upgrade utility only</li>
                        </ul>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <ul>
                          <li>
                            Ed-Fi-Standard XML files containing Descriptors for
                            each ODS version.
                          </li>
                          <li>
                            These XML files are imported directly by the
                            scripting in the
                            <code>Utilities\Migration\Scripts</code> directory
                            above.
                          </li>
                        </ul>
                      </td>
                    </tr>
                    <tr role="row">
                      <td class="confluenceTd">
                        <p>
                          <strong>Library/Console</strong>:<br /><span
                            >EdFi.Ods.Utilities.Migration</span
                          >
                        </p>
                        <p>
                          <span
                            >(console application created via dotnet
                            publish)</span
                          >
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <ul>
                          <li>Maintainers of the upgrade utility only</li>
                        </ul>
                      </td>
                      <td class="confluenceTd">
                        <ul>
                          <li>
                            Small, reusable library making use of
                            <a
                              href="https://dbup.readthedocs.io/en/latest/"
                              class="external-link"
                              rel="nofollow"
                              >DbUp</a
                            >
                            to drive the main upgrade.
                          </li>
                          <li>
                            Executes the SQL scripts contained in the
                            <code>Utilities\Migration\Scripts</code> directory
                            above.
                          </li>
                          <li>
                            Takes a configuration object as input, and chooses
                            the appropriate scripts to execute based on ODS
                            version and current conventions.
                          </li>
                        </ul>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Test Project</strong>:<br /><span
                            >EdFi.Ods.Utilities.Migration.Tests</span
                          >
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <ul>
                          <li>
                            Maintainers of the upgrade utility only (does not
                            contain test coverage for extensions)
                          </li>
                        </ul>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <ul>
                          <li>
                            Contains integration tests that perform a few test
                            upgrades and assert that the output is as expected.
                          </li>
                          <li>
                            Like the console utility, makes direct use of the
                            <code>EdFi.Ods.Utilities.Migration</code> library
                            described above.
                          </li>
                        </ul>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div class="columnLayout single" data-layout="single">
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-DevelopmentTroubleshooting">
                Development Troubleshooting
              </h2>
              <p>This section outlines general troubleshooting procedures.</p>
              <h3 id="MigrationUtility-CompatibilityErrors">
                Compatibility Errors
              </h3>
              <ul>
                <li>
                  Before the schema is updated, the ODS data is checked for
                  compatibility. If changes are required, the upgrade will stop
                  and exception will be thrown with instructions on how to
                  proceed.&nbsp;<br /><span
                    >An example error message follows:</span
                  >
                </li>
              </ul>
              <p style="margin-left: 30px">
                <span class="confluence-embedded-file-wrapper" resolved=""
                  ><img
                    class="confluence-embedded-image"
                    alt="Example compatibility error"
                    loading="lazy"
                    src="https://edfi.atlassian.net/wiki/download/attachments/22492292/image2018-7-26_15-43-25.png?version=1&amp;modificationDate=1600267377250&amp;cacheVersion=1&amp;api=v2"
                    data-image-src="https://edfi.atlassian.net/wiki/download/attachments/22492292/image2018-7-26_15-43-25.png?version=1&amp;modificationDate=1600267377250&amp;cacheVersion=1&amp;api=v2"
                    data-unresolved-comment-count="0"
                    data-linked-resource-id="22493213"
                    data-linked-resource-version="1"
                    data-linked-resource-type="attachment"
                    data-linked-resource-default-alias="image2018-7-26_15-43-25.png"
                    data-base-url="https://edfi.atlassian.net/wiki"
                    data-linked-resource-content-type="image/png"
                    data-linked-resource-container-id="22492292"
                    data-linked-resource-container-version="26"
                    data-media-id="699f1fd1-2ebc-4790-aced-3a7431c5b618"
                    data-media-type="file"
                /></span>
              </p>
              <ul>
                <li>
                  After making the required changes (or writing custom scripts),
                  simply launch the upgrade utility again. The upgrade will
                  proceed where it left off and retry with the last script that
                  failed.
                </li>
              </ul>
              <h3 id="MigrationUtility-OtherExceptionsDuringDevelopment">
                Other Exceptions During Development
              </h3>
              <ul>
                <li>
                  Similar to compatibility error events, the upgrade will halt
                  and an exception message will be generated during development
                  if a problem is encountered.
                </li>
                <li>
                  After making updates to the script that failed, simply
                  re-launch the update tool. The upgrade will proceed where it
                  left off starting with the last script that failed.&nbsp;
                </li>
                <li>
                  If you are testing a version that is not yet released, or if
                  you need to re-execute scripts that were renamed or modified
                  during active development: restore your database from backup
                  and start over.
                </li>
                <li>
                  Similar to other database migration tools, a log of scripts
                  successfully executed will be stored in the default journal
                  table. DbUp's default location
                  is&nbsp;<code>[dbo].[SchemaVersions]</code>.<em><br /></em>
                </li>
                <li>
                  A log file containing errors/warnings from the most recent run
                  may be found by default
                  in&nbsp;<code>"{YourInstallFolder}\.store\edfi.suite3.ods.utilities.migration\{YourMigrationUtilityVersion}\edfi.suite3.ods.utilities.migration\{YourMigrationUtilityVersion}\tools\netcoreapp3.1\any\Ed-Fi-Migration.log"</code>.
                </li>
              </ul>
              <h3 id="MigrationUtility-AdditionalTroubleshooting">
                Additional Troubleshooting
              </h3>
              <ul>
                <li>
                  The step-by-step usage guide below contains runtime
                  troubleshooting information.
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="columnLayout single" data-layout="single">
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-Design/ConventionOverview">
                Design/Convention Overview
              </h2>
              <p>
                The table below outlines some important conventions in the
                as-shipped Migration Utility code.
              </p>
              <div class="table-wrap">
                <table
                  class="relative-table wrapped confluenceTable tablesorter tablesorter-default"
                  style="width: 91.39319%"
                  resolved=""
                  role="grid"
                >
                  <colgroup>
                    <col style="width: 28.067797%" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 35.728813%" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 36.20339%" />
                  </colgroup>
                  <thead>
                    <tr role="row" class="tablesorter-headerRow">
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="0"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="What: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        What
                      </th>
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="1"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Why: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Why
                      </th>
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="2"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Optional Notes: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Optional Notes
                      </th>
                    </tr>
                  </thead>
                  <tbody aria-live="polite" aria-relevant="all">
                    <tr role="row">
                      <td class="confluenceTd">
                        <p><strong>In-place upgrade</strong></p>
                        <p>
                          Database upgrades are performed in place rather than
                          creating a new database copy
                        </p>
                      </td>
                      <td class="confluenceTd">
                        <p><strong>Extensions</strong></p>
                        <ul>
                          <li>Preserve all unknown data in extension tables</li>
                          <li>
                            Ensure errors and exceptions are properly generated
                            and brought to the upgrader's attention during
                            migration if the upgrade conflicts with an extension
                            or any other customization
                          </li>
                        </ul>
                        <p>
                          As a secondary concern, this upgrade method was chosen
                          to ease the upgrade process for a Cloud-based ODS
                          (e.g., on Azure).
                        </p>
                      </td>
                      <td class="confluenceTd">
                        <ul>
                          <li>
                            Users who have extension tables (or any other schema
                            with foreign key dependencies on the
                            <code>edfi</code> schema) will be notified, and must
                            explicitly acknowledge it by adding the
                            <code>BypassExtensionValidationCheck</code> option
                            at the command line when upgrading. This will ensure
                            that the installer is aware that custom upgrade
                            scripts may be required<br /><br />
                          </li>
                        </ul>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong
                            >Sequence of events that occur during
                            upgrade</strong
                          >
                        </p>
                        <p>
                          Specifics differ for each version, but in general the
                          upgrade sequence executes as follows
                        </p>
                        <ol>
                          <li>Validate user input at the command line</li>
                          <li>
                            Create tempdata (tables/stored procedures) that will
                            be used for upgrade
                          </li>
                          <li>
                            Check current ODS data for upgrade compatibility,
                            and display action messages to the user if existing
                            data requires changes
                          </li>
                          <li>
                            Before modifying the <code>edfi</code> schema:
                            calculate and store hash values for primary key data
                            that expected <strong>NOT</strong> to change during
                            upgrade
                          </li>
                          <li>Drop views, constraints, stored procs</li>
                          <li>Import descriptor data from XML</li>
                          <li>
                            Create all new tables for this version that did not
                            previously exist
                          </li>
                          <li>Update data in existing tables</li>
                          <li>Drop old tables</li>
                          <li>
                            Create views/constraints/stored procs for the new
                            version
                          </li>
                          <li>
                            Validation check: recalculate the hash codes
                            generated previously, and make sure that all data
                            that is not supposed to change was not mistakenly
                            modified
                          </li>
                          <li>Drop all temporary migration data</li>
                        </ol>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Minimize the number of scripts with complex
                          dependencies on other scripts in the same
                          directory/upgrade step.
                        </p>
                        <ul>
                          <li>
                            Compatibility checks are designed to run before any
                            changes to the <code>edfi</code> schema have been
                            made. This prevents the user from having to deal
                            with a half-upgraded database while making updates
                          </li>
                          <li>
                            Initial hash codes used for data validation also
                            must be generated before touching the
                            <code>edfi</code> schema to ensure accuracy.
                            <ul>
                              <li>
                                It is also better for performance to do this
                                step while all of our indexes are still present
                              </li>
                            </ul>
                          </li>
                          <li>
                            Dropping of constraints, views, etc is taken care of
                            before making any schema changes to prevent
                            unexpected sql exceptions
                          </li>
                          <li>
                            New descriptors are imported as an initial step
                            before making changes to the core tables. This
                            ensures that all new descriptor data is available in
                            advance for reference during updates
                          </li>
                          <li>
                            After creation of descriptors, the sequence of the
                            next steps is designed to ensure that all data
                            sources exist
                            <em>unmodified on the old schema</em> where we
                            expect it to.
                            <ol>
                              <li>
                                Create tables that are
                                <strong>brand new</strong> to the schema only
                                (and populate them with existing data)
                              </li>
                              <li>
                                Modify existing tables (add/drop columns, etc)
                              </li>
                              <li>Drop old tables no longer needed</li>
                            </ol>
                          </li>
                          <li>
                            Foreign keys, constraints, etc are all added back in
                            once the new table structure is fully in place.
                          </li>
                          <li>
                            Once the <code>edfi</code> schema is fully upgraded
                            and will receive no further changes, we can perform
                            the final data validation check.
                          </li>
                        </ul>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          The suite 2&nbsp;to suite 3 upgrade is a good example
                          case to demonstrate the upgrade steps working together
                          due its larger scale:
                        </p>
                        <ul>
                          <li>
                            For suite 2 to suite 3: All foreign keys and other
                            constraints were dropped during this upgrade in
                            order to adopt the new naming conventions
                          </li>
                          <li>
                            Also for suite 2 to suite 3: ODS types were replaced
                            with new descriptors. This change impacted nearly
                            every table on the existing schema
                          </li>
                        </ul>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong
                            >One script per table in each directory, where
                            possible</strong
                          >
                        </p>
                        <p>Scripts are named in the format:</p>
                        <pre>#### TableName [optional_tags].sql</pre>
                        <p>
                          This convention does not apply to operations that are
                          performed dynamically
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Troubleshooting, Timeout prevention</strong>
                        </p>
                        <p>
                          Custom, unknown extensions on the ODS are common. As
                          part of the process of upgrading a highly-customized
                          ODS, an installer is likely to run into a sql
                          exception somewhere in the middle of upgrade (usually
                          caused by a foreign key dependency, schema bound view,
                          etc).
                        </p>
                        <p>
                          In general, we do not want to attempt to modify an
                          unknown/custom extension on an installer's behalf to
                          try and prevent this from happening. It is important
                          that a installer be aware of each and every change
                          applied to their custom tables. Migration of custom
                          extensions will be handled by the installer.
                        </p>
                        <p>
                          Considering the above, in the event an exception does
                          occur during upgrade, we want to make the
                          troubleshooting process as easy as possible. If an
                          exception is thrown, an installer should immediately
                          be able to tell:
                        </p>
                        <ul>
                          <li>
                            Which table was being upgraded when it occurred
                            (from the file name)
                          </li>
                          <li>
                            What were the major changes being applied (from the
                            file tags)
                          </li>
                          <li>What went wrong (from the exception message)</li>
                          <li>Where to find the code that caused it</li>
                        </ul>
                        <p>
                          Many issues may be fixable from the above information
                          alone. If more detail is needed, the installer can
                          view the code in the referenced script file. By
                          separating script changes by table, we make an effort
                          to ensure that there are only a few lines to look
                          though (rather than hundreds)
                        </p>
                        <p>
                          In addition, each script will be executed in a
                          separate transaction. Operations such as index
                          creation can take a long time on some tables with a
                          large ODS. Splitting the code into separate
                          transactions helps prevent unexpected timeout events
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          The major downside of this approach is the large
                          number of files it can produce. For example, the suite
                          2 to suite 3&nbsp;upgrade was a case where all
                          existing tables saw modifications. This convention
                          generates a change script for every table in more than
                          one directory.
                        </p>
                        <p>
                          With updates becoming more frequent in the future,
                          future versions should not be impacted as heavily.
                        </p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong
                            >Most change logic is held in sql scripts (as of
                            V3)</strong
                          >
                        </p>
                        <p>
                          As of <code>v3</code>: Most of the upgrade logic is
                          performed from the SQL scripts, rather than using .NET
                          based upgrade utility to write database changes
                          directly
                        </p>
                        <p><br /></p>
                        <p><br /></p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          As of <code>v3</code>, most upgrade tasks are simple
                          enough where they can be executed straight from SQL
                          (given a few stored procedures to get started).
                        </p>
                        <p>
                          Given this advantage, effort was made to ensure that
                          each part of the migration tool (console utility,
                          library, integration tests) could be replaced
                          individually as needed
                        </p>
                        <p>
                          The current upgrade utility contains a library making
                          use of
                          <a
                            href="https://dbup.readthedocs.io/en/latest/"
                            class="external-link"
                            rel="nofollow"
                            >DbUp</a
                          >
                          to drive the upgrade process. In the future, if/when
                          this tool no longer suits our needs, we should be able
                          to take existing scripting and port it over to an
                          alternative upgrade tool (such as RoundhousE), or even
                          a custom built tool if the need ever arises.
                        </p>
                        <p>
                          This convention could (and should) change in the
                          future if upgrade requirements become too complex to
                          execute from SQL scripting alone.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd"><br /></td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong
                            >Two types of data validation/testing
                            options</strong
                          >
                        </p>
                        <ul>
                          <li>
                            Dynamic, SQL based<br />
                            <ul>
                              <li>
                                Ensures data that is expected to remain the same
                                does not change
                              </li>
                              <li>
                                Can run on any ODS in the field even if the data
                                is unknown
                              </li>
                            </ul>
                          </li>
                          <li>
                            Integration tests
                            <ul>
                              <li>Runs on a known, given set of inputs</li>
                              <li>
                                Used to test logic in areas where changes should
                                occur
                              </li>
                            </ul>
                          </li>
                        </ul>
                        <p><br /></p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p><strong>Prevent data loss</strong></p>
                        <p>
                          The first type of validation, (dynamic, sql based) is
                          executed on on data that we know should
                          <strong>not</strong> ever change during the upgrade.
                        </p>
                        <ul>
                          <li>
                            The source and destination tables do not need to be
                            the same. This validation type is most commonly used
                            to verify that data was correctly moved to the
                            expected destination table during upgrade
                          </li>
                          <li>
                            Can be executed on any field ODS to ensure that
                            unknown datasets do not cause unexpected data loss
                            during upgrade
                          </li>
                          <li>
                            The data in these tables does not need to be known
                          </li>
                        </ul>
                        <p>
                          The second type of data validation, integration test
                          based, is used to test the logic and transformations
                          where we know the data <strong>should</strong> change:
                        </p>
                        <ul>
                          <li>
                            For example, during the suite 2 to suite
                            3&nbsp;upgrade, descriptor namespaces are converted
                            from the&nbsp;suite 2&nbsp;<code
                              >"<span class="nolink"
                                ><a
                                  href="http://EdOrg/Descriptor/Name.xml"
                                  class="external-link"
                                  rel="nofollow"
                                  >http://EdOrg/Descriptor/Name.xml</a
                                ></span
                              >"</code
                            >
                            format to the suite 3&nbsp;"<code
                              ><a rel="nofollow">uri://EdOrg/Name</a>"</code
                            >
                            format. Integration tests are created to ensure that
                            the upgrade logic is functioning correctly for
                            several known inputs
                          </li>
                        </ul>
                        <p>
                          Together, the two validation types (validation of data
                          that changes, and validation of data that does not
                          change) can be used to create test coverage wherever
                          it is needed for a given ODS upgrade.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          The the dynamic validation is performed via reusable
                          stored procedures that are already created and
                          available during upgrade.
                        </p>
                        <p>
                          See scripts in the "*<code
                            >Source Validation Check</code
                          >" and "<code>*Destination Validation Check</code>"
                          directories for example usages.
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div
          class="columnLayout two-right-sidebar"
          data-layout="two-right-sidebar"
        >
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-UpgradeIssueResolutionApproach">
                Upgrade Issue Resolution Approach
              </h2>
              <p>
                It is common to encounter scenarios where&nbsp;data cannot be
                upgraded directly from one major version to another due to
                schema changes. A common example is that a&nbsp;primary key
                change causes records allowable by the previous version schema
                to be considered duplicates on the upgrade version schema and
                therefore not allowed.
              </p>
              <p>
                The general approaches included here are a result of
                collaboration with the community on how to resolve these common
                situations, and are documented here as a reference for utility
                developers to apply in their own work.
              </p>
              <ul>
                <li>
                  <strong>Approach 1</strong>: Make non-breaking, safe changes
                  to data on the user's behalf.&nbsp;<em
                    >This is the preferred option when practical and safe to do
                    so.</em
                  >
                  <ul>
                    <li>
                      Example: Duplicate session names in the suite 2 schema
                      that will break the new suite 3 primary key will get a
                      term name appended during upgrade to meet schema
                      requirements.
                    </li>
                    <li>
                      Consider logging a warning for the user to review to
                      inform them that a minor change has taken place, and
                      mention the log file in documentation.
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Approach 2</strong>: Throw a compatibility exception
                  asking the user to intervene with updates.&nbsp;<em
                    >Used when we are unable to safely make assumptions on the
                    user's behalf to perform the update for them</em
                  ><br />
                  <ul>
                    <li>
                      See the troubleshooting section of this document for an
                      example of this
                    </li>
                    <li>
                      The returned user-facing message should explain what
                      updates are required, and very briefly include the reason
                      why if it is not immediately obvious.
                    </li>
                    <li>
                      Compatibility exceptions should be thrown before
                      proceeding with core upgrade tasks.&nbsp;
                      <ul>
                        <li>
                          We want to make sure that we are not asking someone to
                          make updates to a database in an intermediate upgrade
                          state.
                        </li>
                      </ul>
                    </li>
                    <li>
                      Each message class has a corresponding error code,
                      mirrored in code by an enumeration
                      <ul>
                        <li>
                          This is done so that specific compatibility scenarios
                          can be covered by integration tests where needed
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>Approach 3</strong>: Back up deprecated objects that
                  cannot be upgraded into another schema before dropping
                  them.&nbsp;<em
                    >Last resort option that should be mainly restricted to
                    deprecated items that are no longer have a place in the new
                    model</em
                  ><br />
                  <ul>
                    <li>
                      As a general approach, it is preferred to avoid dropping
                      data items without a way to recover them in case of
                      disaster. The user may choose to delete the backup if they
                      desire.
                    </li>
                    <li>
                      Avoid this option for tables that exist in both models but
                      simply cannot be upgraded. Should this (<em
                        >hopefully rare</em
                      >) situation occur, consider the option throwing a
                      compatibility exception instead and ask the user back
                      up/empty the table before proceeding.
                    </li>
                  </ul>
                </li>
              </ul>
              <p>
                In general, the option requiring the least amount of user effort
                while safely preserving all data has been chosen in order to
                reduce user burden as much as we are able.<br /><br />
              </p>
            </div>
          </div>
          <div class="cell aside" data-type="aside">
            <div class="innerCell">
              <p><br /></p>
            </div>
          </div>
        </div>
        <div
          class="columnLayout two-right-sidebar"
          data-layout="two-right-sidebar"
        >
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h1 id="MigrationUtility-UsageWalkthrough">Usage Walkthrough</h1>
              <p>
                This section explains how to upgrade an existing suite 2 ODS to
                suite 3 ODS v5.3.&nbsp;
              </p>
              <p>The steps can be summarized as:</p>
              <p></p>
              <div
                class="toc-macro client-side-toc-macro conf-macro output-block hidden-outline"
                data-headerelements="H2"
                data-includeheaderregex="Step \d+.*"
                data-hasbody="false"
                data-macro-name="toc"
                data-macro-id="81d2d652-77a0-4aec-8c14-e8c80d4193fc"
                resolved=""
              >
                <ul style="">
                  <li>
                    <span class="toc-item-body" data-outline="1"
                      ><span class="toc-outline">1</span
                      ><a
                        href="#MigrationUtility-Step1.ReadtheEd-FiODSv5.3UpgradeOverview"
                        class="toc-link"
                        >Step 1. Read the Ed-Fi ODS v5.3 Upgrade Overview</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="2"
                      ><span class="toc-outline">2</span
                      ><a
                        href="#MigrationUtility-Step2.InstallRequiredTools"
                        class="toc-link"
                        >Step 2. Install Required Tools</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="3"
                      ><span class="toc-outline">3</span
                      ><a
                        href="#MigrationUtility-Step3.UninstallthepreviousversionEd-FiODSMigrationUtilityifany"
                        class="toc-link"
                        ><span
                          >Step 3. Uninstall the previous version Ed-Fi ODS
                          Migration Utility if any&nbsp;</span
                        ></a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="4"
                      ><span class="toc-outline">4</span
                      ><a
                        href="#MigrationUtility-Step4.InstalltheEd-FiODSMigrationUtility"
                        class="toc-link"
                        >Step 4. Install the Ed-Fi ODS Migration Utility</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="5"
                      ><span class="toc-outline">5</span
                      ><a
                        href="#MigrationUtility-Step5.BackUpandCreateaWorkingCopyoftheSuite2TargetDatabase"
                        class="toc-link"
                        ><span
                          >Step 5. Back Up and Create a Working Copy of the
                          Suite 2 Target Database</span
                        ></a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="6"
                      ><span class="toc-outline">6</span
                      ><a
                        href="#MigrationUtility-Step6.(Multi-YearODSOnly)CreateaCalendarConfigurationFile"
                        class="toc-link"
                        >Step 6. (Multi-Year ODS Only) Create a Calendar
                        Configuration File</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="7"
                      ><span class="toc-outline">7</span
                      ><a
                        href="#MigrationUtility-Step7.(ODSwithNOExtensionsOnly)RuntheMigrationUtility"
                        class="toc-link"
                        >Step 7. (ODS with NO Extensions Only) Run the Migration
                        Utility</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="8"
                      ><span class="toc-outline">8</span
                      ><a
                        href="#MigrationUtility-Step8.(Extended%2FModifiedODSOnly)-PerformaTestMigrationWithoutExtensions"
                        class="toc-link"
                        >Step 8. (Extended/Modified ODS Only) - Perform a Test
                        Migration Without Extensions</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="9"
                      ><span class="toc-outline">9</span
                      ><a
                        href="#MigrationUtility-Step9.(Extended%2FModifiedODSOnly)-WriteCustomMigrationScriptsforExtensions"
                        class="toc-link"
                        >Step 9. (Extended/Modified ODS Only) - Write Custom
                        Migration Scripts for Extensions</a
                      ></span
                    >
                  </li>
                  <li>
                    <span class="toc-item-body" data-outline="10"
                      ><span class="toc-outline">10</span
                      ><a
                        href="#MigrationUtility-Step10.Post-Upgrade%3AReviewDataChanges"
                        class="toc-link"
                        >Step 10. Post-Upgrade: Review Data Changes&nbsp;</a
                      ></span
                    >
                  </li>
                </ul>
              </div>
              <p></p>
              <p>
                &nbsp;A compatibility reference chart, a command-line parameter
                list, and a troubleshooting guide are included. Each upgrade
                step is outlined in detail below.&nbsp;
              </p>
              <h2
                id="MigrationUtility-Step1.ReadtheEd-FiODSv5.3UpgradeOverview"
              >
                Step 1. Read the Ed-Fi ODS v5.3 Upgrade Overview
              </h2>
              <p>
                Before you get started, you should review and understand the
                information in this section.
              </p>
              <h3 id="MigrationUtility-TargetAudience">Target Audience</h3>
              <p>
                These instructions have been created for technical
                professionals, including software developers and database
                administrators. The reader should be comfortable with performing
                the following types of tasks:
              </p>
              <ul>
                <li>Creating and managing SQL Server database backups</li>
                <li>Performing direct SQL commands and queries&nbsp;</li>
                <li>
                  Execution of a command-line based tool that will perform
                  direct database modifications
                </li>
                <li>Creating a configuration file for upgrade (.csv format)</li>
                <li>
                  Writing custom database migration scripts (Extended ODS only)
                </li>
              </ul>
              <h3 id="MigrationUtility-GeneralNotes">General Notes</h3>
              <ul>
                <li>
                  <strong
                    >Your suite 2 Ed-Fi ODS / API will checked for compatibility
                    automatically during the migration process.&nbsp;</strong
                  >If changes are needed, you will be prompted at the command
                  line by the migration utility.&nbsp;A summary of commonly
                  encountered compatibility conditions has been included in this
                  section for reference.
                </li>
                <li>
                  The new schema may contains upgrades to the structure of
                  primary keys on several tables. In most instances, these new
                  uniqueness requirements will be resolved automatically for you
                  with no action required.
                </li>
                <li>
                  There are some areas where new identities cannot be generated
                  automatically on your behalf during upgrade. These tables will
                  need to be updated manually.<br />&nbsp;
                </li>
              </ul>
            </div>
          </div>
          <div class="cell aside" data-type="aside">
            <div class="innerCell">
              <p><br /></p>
            </div>
          </div>
        </div>
        <div class="columnLayout single" data-layout="single">
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h3 id="MigrationUtility-CompatibilityConditions">
                <strong>Compatibility Conditions</strong>
              </h3>
              <p>
                This section describes compatibility conditions (i.e.,
                requirements that may need intervention for the compatibility
                tool to function properly) and suggested remediation.<strong
                  ><br
                /></strong>
              </p>
              <div
                id="expander-817691657"
                class="expand-container conf-macro output-block"
                data-hasbody="true"
                data-macro-name="expand"
                data-macro-id="426db649-ebaf-4032-964e-f4e5e202de3b"
                resolved=""
              >
                <div id="expander-control-817691657" class="expand-control">
                  <span class="expand-control-icon icon">&nbsp;</span
                  ><span class="expand-control-text"
                    >Very common compatibility conditions (click to
                    expand)</span
                  >
                </div>
                <div
                  id="expander-content-817691657"
                  class="expand-content expand-hidden"
                >
                  <p><br /></p>
                  <div class="table-wrap">
                    <table
                      class="fixed-table wrapped confluenceTable tablesorter tablesorter-default"
                      resolved=""
                      role="grid"
                    >
                      <colgroup>
                        <col style="width: 498px" />
                      </colgroup>
                      <colgroup>
                        <col style="width: 1847px" />
                      </colgroup>
                      <thead>
                        <tr role="row" class="tablesorter-headerRow">
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="0"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Table: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            Table
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="1"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Data Compatibility Requirement: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            Data Compatibility Requirement
                          </th>
                        </tr>
                      </thead>
                      <tbody aria-live="polite" aria-relevant="all">
                        <tr role="row">
                          <td class="confluenceTd">
                            <code><strong>[edfi].[Assessment]</strong></code>
                          </td>
                          <td class="confluenceTd">
                            <p>
                              All assessments must have a<code>
                                <strong>[Namespace] </strong></code
                              >set. (This data may be found in
                              <strong><code>[edfi].[Assessment]</code> </strong
                              >or<code
                                ><strong>
                                  [edfi].[AssessmentFamily]</strong
                                ></code
                              >).
                            </p>
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            <div class="content-wrapper">
                              <div
                                id="expander-1891664527"
                                class="expand-container conf-macro output-block"
                                data-hasbody="true"
                                data-macro-name="expand"
                                data-macro-id="5fb91cc0-77b0-4a15-8591-c5d79fb0299e"
                                resolved=""
                              >
                                <div
                                  id="expander-control-1891664527"
                                  class="expand-control"
                                >
                                  <span class="expand-control-icon icon"
                                    >&nbsp;</span
                                  ><span class="expand-control-text"
                                    >Expand for full list: Several tables
                                    capturing student information</span
                                  >
                                </div>
                                <div
                                  id="expander-content-1891664527"
                                  class="expand-content expand-hidden"
                                >
                                  <p>
                                    <code
                                      >[edfi].[StudentProgramParticipation]</code
                                    ><br /><code
                                      >[edfi].[StudentCharacteristic]</code
                                    ><br /><code>[edfi].[StudentIndicator]</code
                                    ><br /><code
                                      >[edfi].[StudentLearningStyle]</code
                                    ><br /><code>[edfi].[StudentAddress]</code
                                    ><br /><code
                                      >[edfi].[StudentIdentificationCode]</code
                                    ><br /><code
                                      >[edfi].[StudentElectronicMail]</code
                                    ><br /><code
                                      >[edfi].[StudentInternationalAddress]</code
                                    ><br /><code>[edfi].[StudentLanguage]</code
                                    ><br /><code>[edfi].[StudentRace]</code
                                    ><br /><code
                                      >[edfi].[StudentDisability]</code
                                    ><br /><code>[edfi].[StudentTelephone]</code
                                    ><br /><code
                                      >[edfi].[PostSecondaryEventPostSecondaryInstitution]</code
                                    >
                                  </p>
                                </div>
                              </div>
                            </div>
                          </td>
                          <td colspan="1" class="confluenceTd">
                            The upgrade utility must be able to locate an<code>
                              <strong>[EducationOrganizationId] </strong></code
                            >for every student with data in the listed tables to
                            proceed.<br /><br /><em
                              >The easiest way to meet this requirement is to
                              ensure that every student has a corresponding
                              record in
                              <code>[edfi].[StudentSchoolAssociation]</code> or
                              <code
                                >[edfi].[StudentEducationOrganizationAssociation]</code
                              >.</em
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="confluenceTd">
                            <code
                              ><strong>[edfi].[StaffCredential]</strong></code
                            >
                          </td>
                          <td class="confluenceTd">
                            <p>
                              The column
                              <code
                                ><strong>[</strong
                                ><strong
                                  >StateOfIssueStateAbbreviationTypeId]</strong
                                > </code
                              >must be non-null for all records.
                            </p>
                            <p>
                              This is the abbreviation for the name of the state
                              (within the United States) or extra-state
                              jurisdiction in which a license/credential was
                              issued.
                            </p>
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            <strong>(Any extension table)</strong>
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Additional steps are required when extensions are
                            present. Please review the upgrade process detailed
                            below for additional guidance.
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <div
                id="expander-1174740655"
                class="expand-container conf-macro output-block"
                data-hasbody="true"
                data-macro-name="expand"
                data-macro-id="50408275-f415-4693-9ec3-166306517d8c"
                resolved=""
              >
                <div id="expander-control-1174740655" class="expand-control">
                  <span class="expand-control-icon icon">&nbsp;</span
                  ><span class="expand-control-text"
                    >Less common compatibility conditions (click to
                    expand)</span
                  >
                </div>
                <div
                  id="expander-content-1174740655"
                  class="expand-content expand-hidden"
                >
                  <div class="table-wrap">
                    <table
                      class="fixed-table wrapped confluenceTable tablesorter tablesorter-default"
                      resolved=""
                      role="grid"
                    >
                      <colgroup>
                        <col style="width: 379px" />
                      </colgroup>
                      <colgroup>
                        <col style="width: 1378px" />
                      </colgroup>
                      <thead>
                        <tr role="row" class="tablesorter-headerRow">
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="0"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Table: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            <span>Table</span>
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="1"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Data Compatibility Requirement: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            <span>Data Compatibility Requirement</span>
                          </th>
                        </tr>
                      </thead>
                      <tbody aria-live="polite" aria-relevant="all">
                        <tr role="row">
                          <td class="confluenceTd">
                            <code><strong>[edfi].[GradingPeriod]</strong></code>
                          </td>
                          <td class="confluenceTd">
                            <ul>
                              <li>
                                There must be no duplicate <strong>[</strong
                                ><code><strong>PeriodSequence] </strong></code
                                >values for the same school during the same
                                grading period.
                              </li>
                              <li>
                                If prompted by the upgrade utility, all
                                <strong>[</strong
                                ><code><strong>PeriodSequence] </strong></code
                                >values must be non-null
                              </li>
                            </ul>
                            <p><em>Technical Details:</em></p>
                            <p>
                              <em
                                >This compatibility requirement is a result of a
                                primary key change between suite</em
                              >
                              2&nbsp;<em>and suite 3 version 3.1</em>
                            </p>
                            <ul>
                              <li>
                                <em
                                  >Old 2.0&nbsp;Primary Key:&nbsp;<code
                                    >[GradingPeriodDescriptorId], [SchoolId],
                                    [BeginDate]</code
                                  ></em
                                >
                              </li>
                              <li>
                                <em
                                  >New 3.1 Primary Key:<strong>&nbsp;</strong
                                  ><code
                                    >[GradingPeriodDescriptorId],
                                    [SchoolId],</code
                                  ><span class="legacy-color-text-green2"
                                    ><code>&nbsp;</code
                                    ><strong>[PeriodSequence] </strong
                                    >(new),&nbsp;<strong>[SchoolYear] </strong
                                    >(new)</span
                                  >. (<code>[BeginDate] </code>is removed)</em
                                >
                              </li>
                            </ul>
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            <code
                              ><strong
                                >[edfi].[DisciplineActionDisciplineIncident]</strong
                              ></code
                            >
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <p>
                              The 3.1 schema no longer allows discipline action
                              records with students that are not associated with
                              the discipline incident.
                            </p>
                            <p>
                              Every record in<code>
                                [edfi].[DisciplineActionDisciplineIncident]</code
                              >
                              must have a corresponding record in
                              <code
                                >[edfi].[StudentDisciplineIncidentAssociation]</code
                              >
                              with the same<code>
                                [StudentUSI], [SchoolId],</code
                              >
                              and <code>[IncidentIdentifier]</code>.
                            </p>
                            <p><br /></p>
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            <code
                              ><strong>[edfi].[RestraintEvent]</strong></code
                            >
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Ensure that there are no duplicate<code>
                              <strong>[</strong
                              ><strong>RestraintEventIdentifier]</strong> </code
                            >values for the same student at the same school
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            <code
                              ><strong>[edfi].[OpenStaffPosition]</strong></code
                            >
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Ensure that there are no two duplicate
                            <code
                              ><strong>[</strong
                              ><strong>RequisitionNumber]</strong> </code
                            >entries for the same education organization
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            <code><strong>[edfi].[AccountCode]</strong></code>
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <p>
                              This table must be empty before upgrading. Due to
                              a major schema change, data in this table cannot
                              be preserved during upgrade from suite 2 to suite
                              3
                            </p>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <h3 id="MigrationUtility-OtherCompatibilityConditions">
                Other Compatibility Conditions
              </h3>
              <p>
                There are several other less common items not included above.
                The migration utility will check for these items automatically
                and provide guidance messages as needed. For additional
                technical details, please consult the
                <a href="#MigrationUtility-TroubleshootingGuide"
                  >TroubleshootingGuide</a
                >
                below.
              </p>
            </div>
          </div>
        </div>
        <div
          class="columnLayout two-right-sidebar"
          data-layout="two-right-sidebar"
        >
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-Step2.InstallRequiredTools">
                Step 2. Install Required Tools
              </h2>
              <ul>
                <li>
                  Ensure&nbsp;<a
                    class="external-link"
                    style="text-decoration: none"
                    href="https://dotnet.microsoft.com/download/dotnet-core/3.1"
                    rel="nofollow"
                    >.NET Core 3.1 SDK</a
                  >&nbsp;is installed.&nbsp;&nbsp;
                </li>
                <li>
                  Add Ed-Fi package source by running the following&nbsp;
                  command in Powershell:&nbsp;
                </li>
              </ul>
              <div
                class="code panel pdl conf-macro output-block"
                style="border-width: 1px"
                data-hasbody="true"
                data-macro-name="code"
                data-macro-id="233de883-1f61-4a42-a100-e122d51eb17f"
              >
                <div class="codeContent panelContent pdl">
                  <div>
                    <div
                      id="highlighter_299381"
                      class="syntaxhighlighter sh-confluence nogutter powershell"
                    >
                      <div class="toolbar">
                        <span
                          ><a href="#" class="toolbar_item command_help help"
                            >?</a
                          ></span
                        >
                      </div>
                      <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="code">
                              <div
                                class="container"
                                title="Hint: double-click to select code"
                              >
                                <div
                                  class="line number1 index0 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain">if (</code
                                  ><code class="powershell keyword">-not</code>
                                  <code class="powershell plain"
                                    >[Net.ServicePointManager]::SecurityProtocol.HasFlag([Net.SecurityProtocolType]::Tls12))
                                    {</code
                                  >
                                </div>
                                <div
                                  class="line number2 index1 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell spaces"
                                    >&nbsp;&nbsp;&nbsp;</code
                                  ><code class="powershell plain"
                                    >[Net.ServicePointManager]::SecurityProtocol
                                    += [Net.SecurityProtocolType]::Tls12</code
                                  >
                                </div>
                                <div
                                  class="line number3 index2 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain">}</code>
                                </div>
                                <div
                                  class="line number4 index3 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain">Register</code
                                  ><code class="powershell keyword"
                                    >-PackageSource</code
                                  >&nbsp;<code class="powershell keyword"
                                    >-Name</code
                                  >
                                  <code class="powershell plain">Ed</code
                                  ><code class="powershell keyword"
                                    >-FiAzureArtifacts</code
                                  >
                                  <code class="powershell keyword"
                                    >-Location</code
                                  >&nbsp;<code class="powershell plain"
                                    ><a href="https://pkgs.dev.azure.com/ed"
                                      >https://pkgs.dev.azure.com/ed</a
                                    ></code
                                  ><code class="powershell keyword">-fi</code
                                  ><code class="powershell keyword"
                                    >-alliance</code
                                  ><code class="powershell plain">/Ed</code
                                  ><code class="powershell keyword">-Fi</code
                                  ><code class="powershell keyword"
                                    >-Alliance</code
                                  ><code class="powershell keyword">-OSS</code
                                  ><code class="powershell plain"
                                    >/_packaging/EdFi/nuget/v3/index.json&nbsp;</code
                                  ><code class="powershell keyword"
                                    >-ProviderName</code
                                  >
                                  <code class="powershell plain">NuGet</code>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <h2
                class="auto-cursor-target"
                id="MigrationUtility-Step3.UninstallthepreviousversionEd-FiODSMigrationUtilityifany"
              >
                <span class="legacy-color-text-blue3"
                  >Step 3. Uninstall the previous version Ed-Fi ODS Migration
                  Utility if any&nbsp;</span
                >
              </h2>
              <ul>
                <li>
                  &nbsp;The package id of the binaries changed to include suite
                  number, If you had previously installed
                  'EdFi.Ods.Utilities.Migration' package, uninstall it&nbsp;from
                  a PowerShell prompt&nbsp;using the following command:
                </li>
              </ul>
              <div
                class="code panel pdl conf-macro output-block"
                style="border-width: 1px"
                data-hasbody="true"
                data-macro-name="code"
                data-macro-id="730e4afe-0dc2-4870-bd8f-cebd8ab9a616"
              >
                <div
                  class="codeHeader panelHeader pdl"
                  style="border-bottom-width: 1px"
                >
                  <b>Uninstall Ed-Fi ODS Migration Utility</b>
                </div>
                <div class="codeContent panelContent pdl">
                  <div>
                    <div
                      id="highlighter_954248"
                      class="syntaxhighlighter sh-confluence nogutter powershell"
                    >
                      <div class="toolbar">
                        <span
                          ><a href="#" class="toolbar_item command_help help"
                            >?</a
                          ></span
                        >
                      </div>
                      <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="code">
                              <div
                                class="container"
                                title="Hint: double-click to select code"
                              >
                                <div
                                  class="line number1 index0 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain">c:\&gt;</code
                                  ><code class="powershell keyword">cd</code>
                                  <code class="powershell plain"
                                    >{YourAlreadyInstalledFolder}</code
                                  >
                                </div>
                                <div
                                  class="line number2 index1 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain"
                                    >c:\&gt;dotnet tool uninstall
                                    EdFi.Ods.Utilities.Migration -</code
                                  ><code class="powershell keyword">-tool</code
                                  ><code class="powershell keyword">-path</code>
                                  <code class="powershell plain"
                                    >{YourAlreadyInstalledFolder}</code
                                  >
                                </div>
                                <div
                                  class="line number3 index2 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain"
                                    >You will receive below message for
                                    uninstalled is successful
                                  </code>
                                </div>
                                <div
                                  class="line number4 index3 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell string"
                                    >"Tool 'edfi.ods.utilities.migration'
                                    (version '2.1.0') was successfully
                                    uninstalled."</code
                                  >
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <h2
                id="MigrationUtility-Step4.InstalltheEd-FiODSMigrationUtility"
              >
                Step 4. Install the Ed-Fi ODS Migration Utility
              </h2>
              <ul>
                <li>
                  <span data-colorid="wf5538m5iz"><span>&nbsp;</span></span
                  >Install the Ed-Fi ODS Migration utility from a PowerShell
                  prompt using the following command, noting after install what
                  version was installed since that will be needed in later steps
                  where
                  <code style="letter-spacing: 0px"
                    >{YourMigrationUtilityVersion}</code
                  ><span style="letter-spacing: 0px"> is referenced :</span>
                </li>
              </ul>
              <div
                class="code panel pdl conf-macro output-block"
                style="border-width: 1px"
                data-hasbody="true"
                data-macro-name="code"
                data-macro-id="ac9634ad-e762-4f7b-8ac2-67a0d6bc3154"
              >
                <div
                  class="codeHeader panelHeader pdl"
                  style="border-bottom-width: 1px"
                >
                  <b>Install Ed-Fi ODS Migration Utility</b>
                </div>
                <div class="codeContent panelContent pdl">
                  <div>
                    <div
                      id="highlighter_116338"
                      class="syntaxhighlighter sh-confluence nogutter powershell"
                    >
                      <div class="toolbar">
                        <span
                          ><a href="#" class="toolbar_item command_help help"
                            >?</a
                          ></span
                        >
                      </div>
                      <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="code">
                              <div
                                class="container"
                                title="Hint: double-click to select code"
                              >
                                <div
                                  class="line number1 index0 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain"
                                    >c:\&gt;mkdir {YourInstallFolder}</code
                                  >
                                </div>
                                <div
                                  class="line number2 index1 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain"
                                    >c:\&gt; dotnet tool install
                                    EdFi.Suite3.Ods.Utilities.Migration&nbsp;
                                    -</code
                                  ><code class="powershell keyword"
                                    >-version</code
                                  >
                                  <code class="powershell plain">2.2.* -</code
                                  ><code class="powershell keyword">-tool</code
                                  ><code class="powershell keyword">-path</code>
                                  <code class="powershell plain"
                                    >{YourInstallFolder}</code
                                  >
                                </div>
                                <div
                                  class="line number3 index2 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain"
                                    >You will receive below message for
                                    installed is successful
                                  </code>
                                </div>
                                <div
                                  class="line number4 index3 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="powershell plain">Tool </code
                                  ><code class="powershell string"
                                    >'edfi.suite3.ods.utilities.migration'</code
                                  >
                                  <code class="powershell plain">(version </code
                                  ><code class="powershell string">'2.2.1'</code
                                  ><code class="powershell plain"
                                    >) was successfully installed.</code
                                  >
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <h2
                class="auto-cursor-target"
                id="MigrationUtility-Step5.BackUpandCreateaWorkingCopyoftheSuite2TargetDatabase"
              >
                <span class="legacy-color-text-blue3"
                  >Step 5. Back Up and Create a Working Copy of the Suite 2
                  Target Database</span
                >
              </h2>
              <ul>
                <li>
                  <p>
                    Create a&nbsp;<strong>full&nbsp;backup</strong>&nbsp;of the
                    target <strong>suite 2 EdFi_Ods</strong> database.
                  </p>
                </li>
                <li>
                  Restore this backup to your SQL Server instance as
                  <a
                    href="https://docs.microsoft.com/en-us/sql/relational-databases/backup-restore/restore-a-database-to-a-new-location-sql-server"
                    class="external-link"
                    rel="nofollow"
                    >a copy, in a new location</a
                  >.
                </li>
                <li>
                  Make note of the database connection string as it will be
                  required for a later step.
                </li>
              </ul>
              <h2
                id="MigrationUtility-Step6.(Multi-YearODSOnly)CreateaCalendarConfigurationFile"
              >
                Step 6. (Multi-Year ODS Only) Create a Calendar Configuration
                File
              </h2>
              <p>
                <strong
                  >In most cases, you can skip this step if the ODS contains
                  valid calendar data for only one school year</strong
                ><span
                  >. The migration tool will usually be able to resolve this
                  item automatically for you.</span
                >
              </p>
              <p>
                The suite 3 ODS upgrade includes enhancements to the calendar,
                including tracking of school year information for every calendar
                event and session. To ensure that your new calendar is accurate,
                the migration tool will need to know which school year to
                associate with every calendar item in your ODS.&nbsp;
              </p>
              <p class="auto-cursor-target">
                Example calendar configuration files can be downloaded from the
                <strong>download</strong> panel on the right.&nbsp;
              </p>
              <p class="auto-cursor-target">
                The following is an example of a calendar configuration file
                (CSV) for Grand Bend ISD:
              </p>
              <div
                class="code panel pdl conf-macro output-block"
                style="border-width: 1px"
                data-hasbody="true"
                data-macro-name="code"
                data-macro-id="324e2710-e19c-4c79-8f4f-72244bc5b0ae"
              >
                <div
                  class="codeHeader panelHeader pdl"
                  style="border-bottom-width: 1px"
                >
                  <b>Example 1: Grand-Bend calendar-config.csv</b>
                </div>
                <div class="codeContent panelContent pdl">
                  <div>
                    <div
                      id="highlighter_286540"
                      class="syntaxhighlighter sh-confluence nogutter text"
                    >
                      <div class="toolbar">
                        <span
                          ><a href="#" class="toolbar_item command_help help"
                            >?</a
                          ></span
                        >
                      </div>
                      <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="code">
                              <div
                                class="container"
                                title="Hint: double-click to select code"
                              >
                                <div
                                  class="line number1 index0 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >SchoolId,SchoolYear,StartDate,EndDate</code
                                  >
                                </div>
                                <div
                                  class="line number2 index1 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >255901001,2011,2010-08-23,2011-05-27</code
                                  >
                                </div>
                                <div
                                  class="line number3 index2 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >255901044,2011,2010-08-23,2011-05-27</code
                                  >
                                </div>
                                <div
                                  class="line number4 index3 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >255901107,2011,2010-08-23,2011-05-27</code
                                  >
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <p>
                Note that each line contains a SchoolId, SchoolYear, the first
                calendar day and the last calendar day of the school year.
              </p>
              <ul>
                <li>
                  <span
                    >Create a new calendar configuration file (.CSV) by
                    referencing the above examples. Your configuration file must
                    match the following format (</span
                  ><strong>including header row</strong><span>):</span>
                </li>
              </ul>
              <div
                class="code panel pdl conf-macro output-block"
                style="border-width: 1px"
                data-hasbody="true"
                data-macro-name="code"
                data-macro-id="a63bafeb-6459-452a-87bf-3039a2925ad1"
              >
                <div
                  class="codeHeader panelHeader pdl"
                  style="border-bottom-width: 1px"
                >
                  <b>Example 2: calendar-config.csv</b>
                </div>
                <div class="codeContent panelContent pdl">
                  <div>
                    <div
                      id="highlighter_456760"
                      class="syntaxhighlighter sh-confluence nogutter text"
                    >
                      <div class="toolbar">
                        <span
                          ><a href="#" class="toolbar_item command_help help"
                            >?</a
                          ></span
                        >
                      </div>
                      <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="code">
                              <div
                                class="container"
                                title="Hint: double-click to select code"
                              >
                                <div
                                  class="line number1 index0 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >SchoolId,SchoolYear,StartDate,EndDate</code
                                  >
                                </div>
                                <div
                                  class="line number2 index1 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >{Your_First_School_Id},20XX,{FirstDayOfSchoolYear},{LastDayOfSchoolYear}</code
                                  >
                                </div>
                                <div
                                  class="line number3 index2 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain"
                                    >{Your_Second_School_Id},20XX,{FirstDayOfSchoolYear},{LastDayOfSchoolYear}</code
                                  >
                                </div>
                                <div
                                  class="line number4 index3 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="text plain">...</code>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <ul>
                <li>
                  Store the configuration file in a location that is accessible
                  by your SQL server
                </li>
              </ul>
              <h2
                id="MigrationUtility-Step7.(ODSwithNOExtensionsOnly)RuntheMigrationUtility"
              >
                Step 7. (ODS with NO Extensions Only) Run the Migration Utility
              </h2>
              <ul>
                <li>
                  <p class="auto-cursor-target">
                    Open a new command prompt and navigate to the Ed-Fi
                    ODS&nbsp;Migration utility installation folder:
                  </p>
                  <div
                    class="code panel pdl conf-macro output-block"
                    style="border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="code"
                    data-macro-id="bc637290-f01a-43c9-93bd-471ddec3c096"
                  >
                    <div class="codeContent panelContent pdl">
                      <div>
                        <div
                          id="highlighter_270586"
                          class="syntaxhighlighter sh-confluence nogutter powershell"
                        >
                          <div class="toolbar">
                            <span
                              ><a
                                href="#"
                                class="toolbar_item command_help help"
                                >?</a
                              ></span
                            >
                          </div>
                          <table border="0" cellpadding="0" cellspacing="0">
                            <tbody>
                              <tr>
                                <td class="code">
                                  <div
                                    class="container"
                                    title="Hint: double-click to select code"
                                  >
                                    <div
                                      class="line number1 index0 alt2"
                                      data-bidi-marker="true"
                                    >
                                      <code class="powershell keyword">CD</code>
                                      <code class="powershell plain"
                                        >{YourInstallFolder}</code
                                      >
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
                <li>
                  <p class="auto-cursor-target">
                    Launch the console tool. Modify the below example parameters
                    to match your environment. Replace the example&nbsp;<span
                      >"</span
                    ><code
                      ><span><a rel="nofollow">uri://ed-fi.org</a></span></code
                    ><span>"</span>&nbsp;with the Namespace Prefix to insert for
                    your new descriptors:
                  </p>
                  <div
                    class="code panel pdl conf-macro output-block"
                    style="border-width: 1px"
                    data-hasbody="true"
                    data-macro-name="code"
                    data-macro-id="5a64ea6c-151e-492f-8a1d-d4414566cb76"
                  >
                    <div class="codeContent panelContent pdl">
                      <div>
                        <div
                          id="highlighter_929137"
                          class="syntaxhighlighter sh-confluence nogutter powershell"
                        >
                          <div class="toolbar">
                            <span
                              ><a
                                href="#"
                                class="toolbar_item command_help help"
                                >?</a
                              ></span
                            >
                          </div>
                          <table border="0" cellpadding="0" cellspacing="0">
                            <tbody>
                              <tr>
                                <td class="code">
                                  <div
                                    class="container"
                                    title="Hint: double-click to select code"
                                  >
                                    <div
                                      class="line number1 index0 alt2"
                                      data-bidi-marker="true"
                                    >
                                      <code class="powershell plain"
                                        >.\EdFi.Ods.Utilities.Migration -</code
                                      ><code class="powershell keyword"
                                        >-Database</code
                                      >
                                      <code class="powershell string"
                                        >"YOUR_DATABASE_CONNECTION_STRING_HERE"</code
                                      >
                                      <code class="powershell plain">-</code
                                      ><code class="powershell keyword"
                                        >-CalendarConfigPath</code
                                      >
                                      <code class="powershell string"
                                        >"C:\PATH\TO\YOUR\CALENDAR_CONFIG_IF_APPLICABLE.csv"</code
                                      >
                                      <code class="powershell plain">-</code
                                      ><code class="powershell keyword"
                                        >-DescriptorNamespace</code
                                      >
                                      <code class="powershell string"
                                        >"uri://ed-fi.org"</code
                                      >
                                      <code class="powershell plain">-</code
                                      ><code class="powershell keyword"
                                        >-CredentialNamespace</code
                                      >
                                      <code class="powershell string"
                                        >"uri://ed-fi.org"</code
                                      >
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
                <li>
                  Notes for upgrades performed on a remote database
                  <ul>
                    <li>
                      The calendar configuration file path provided during
                      upgrade must be accessible
                      <strong>by your SQL server</strong> for importing and
                      validation.
                    </li>
                    <li>
                      The XML files used to create suite 3 descriptors are by
                      default located in
                      <code
                        >"{YourIstallFolder\.store\edfi.suite3.ods.utilities.migration\{YourMigrationUtilityVersion}\edfi.suite3.ods.utilities.migration\{YourMigrationUtilityVersion}\tools\netcoreapp3.1\any\Descriptors\3.1"</code
                      >.
                      <strong
                        >This directory must also be accessible by your SQL
                        server</strong
                      >
                      for importing. If you need to copy this directory to a new
                      location, you may make use of the
                      <code
                        >--<span>DescriptorXMLDirectoryPath</span>&nbsp;"C:\PATH\TO\YOUR\DESCRIPTOR\XML"&nbsp;</code
                      >parameter to point the migration tool to the new
                      location. After copying to the new location, you could
                      also modify the contents of the folder to include
                      customizations.&nbsp;&nbsp;
                    </li>
                  </ul>
                </li>
                <li>
                  Users who are running the migration tool on an extended ODS
                  <strong>must</strong> use the
                  <code>--BypassExtensionValidationCheck</code> option during
                  upgrade in order to allow the tool to make changes when
                  extension dependencies are present.&nbsp;<em>&nbsp;</em>
                  <ul>
                    <li>
                      <em
                        >Details on upgrading an extended ODS are included in
                        the steps below.</em
                      >
                    </li>
                  </ul>
                </li>
              </ul>
              <ul>
                <li>
                  The console tool will check your ODS for compatibility, and
                  then proceed to perform an in-place upgrade on the specified
                  database.
                </li>
                <li>
                  <strong
                    >If you encounter any compatibility messages or errors
                    during upgrade</strong
                  >
                  <ul>
                    <li>
                      During the upgrade process, your ODS will be checked for
                      compatibility with the latest version.&nbsp; If changes
                      are required, you may encounter a compatibility message,
                      and the upgrade will stop.&nbsp;&nbsp;<br /><strong
                        >Example</strong
                      ><br /><span
                        class="confluence-embedded-file-wrapper"
                        resolved=""
                        ><img
                          class="confluence-embedded-image"
                          alt="Example compatibility exception"
                          loading="lazy"
                          src="https://edfi.atlassian.net/wiki/download/attachments/22492292/image2018-7-26_15-27-43.png?version=1&amp;modificationDate=1600267377390&amp;cacheVersion=1&amp;api=v2"
                          data-image-src="https://edfi.atlassian.net/wiki/download/attachments/22492292/image2018-7-26_15-27-43.png?version=1&amp;modificationDate=1600267377390&amp;cacheVersion=1&amp;api=v2"
                          data-unresolved-comment-count="0"
                          data-linked-resource-id="22492290"
                          data-linked-resource-version="1"
                          data-linked-resource-type="attachment"
                          data-linked-resource-default-alias="image2018-7-26_15-27-43.png"
                          data-base-url="https://edfi.atlassian.net/wiki"
                          data-linked-resource-content-type="image/png"
                          data-linked-resource-container-id="22492292"
                          data-linked-resource-container-version="26"
                          data-media-id="8c4c7586-45b4-40c5-ad8a-b050ff0ab565"
                          data-media-type="file"
                      /></span>
                    </li>
                    <li>
                      After making the required changes (or writing custom
                      scripts), simply launch the upgrade utility again.&nbsp;
                      The upgrade will proceed where it left off and retry with
                      the last script that failed.
                    </li>
                    <li>
                      See the
                      <a href="#MigrationUtility-TroubleshootingGuide"
                        >TroubleshootingGuide</a
                      >
                      below for additional guidance
                    </li>
                  </ul>
                </li>
                <li>
                  <strong
                    >Once the process runs to completion with no errors, your
                    upgrade is complete&nbsp;</strong
                  ><strong><br /></strong>
                </li>
                <li>
                  For a summary of all available parameter options for the Ed-Fi
                  ODS console-based migration tool, please see the included
                  reference below.
                </li>
              </ul>
              <h2
                id="MigrationUtility-Step8.(Extended/ModifiedODSOnly)-PerformaTestMigrationWithoutExtensions"
              >
                Step 8. (Extended/Modified ODS Only) - Perform a Test Migration
                Without Extensions
              </h2>
              <ul>
                <li>
                  It is highly recommended that you first perform a test
                  migration without your extension tables present in order to
                  ensure that all core upgrade requirements have been met
                  <ul>
                    <li>
                      On your ODS copy, temporarily drop all extension
                      tables.&nbsp;
                    </li>
                    <li>
                      Complete the migration process exactly as detailed
                      in&nbsp;Step 6, above.
                    </li>
                    <li>
                      Once the migration has completed successfully on the core
                      Ed-Fi data, restore your suite 2&nbsp;ODS working copy
                      from backup, including all extension tables, and proceed
                      with the next step
                    </li>
                  </ul>
                </li>
              </ul>
              <h2
                id="MigrationUtility-Step9.(Extended/ModifiedODSOnly)-WriteCustomMigrationScriptsforExtensions"
              >
                Step 9. (Extended/Modified ODS Only) - Write Custom Migration
                Scripts for Extensions
              </h2>
              <div
                class="confluence-information-macro confluence-information-macro-information conf-macro output-block"
                data-hasbody="true"
                data-macro-name="info"
                data-macro-id="e16c0c36-f55b-4da2-af49-29a84f6b89f8"
              >
                <p class="title">Important notes before you begin</p>
                <span
                  class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"
                >
                </span>
                <div class="confluence-information-macro-body">
                  <ul>
                    <li class="auto-cursor-target">
                      When running the migration tool on an ODS with extensions
                      or external dependencies on the EdFi schema, you
                      <strong>must</strong> add the
                      <code
                        ><strong>--BypassExtensionValidationCheck</strong></code
                      >
                      parameter at the command line. This is required in order
                      to permit the migration tool to make changes to an
                      extended database.
                    </li>
                    <li class="auto-cursor-target">
                      Migration utility may drop and re-create auth views if
                      changes are needed for the upgraded ODS. If you have
                      modified auth views, review and reapply your changes after
                      migration as necessary.&nbsp;&nbsp;
                    </li>
                    <li>
                      The
                      <a href="#MigrationUtility-TroubleshootingGuide"
                        >TroubleshootingGuide</a
                      >
                      below contains helpful advice for users upgrading an ODS
                      with extensions.
                    </li>
                  </ul>
                </div>
              </div>
              <h3
                id="MigrationUtility-Step9a.LocatetheEd-FiMigrationscriptsandreviewthecurrentupgradeconventions"
              >
                <span
                  >Step 9a. Locate the Ed-Fi Migration scripts and review the
                  current upgrade conventions</span
                >
              </h3>
              <ul>
                <li>
                  The edfi migration scripts are located by default in<strong
                    >&nbsp;{YourInstallFolder}\.store\edfi.suite3.ods.utilities.migration\2.0.0\edfi.suite3.ods.utilities.migration\2.0.0\tools\netcoreapp3.1\any\Scripts</strong
                  >
                </li>
                <li>
                  All SQL scripts are run in numerical order, with
                  version-specific upgrade further categories.
                </li>
                <li>
                  <span
                    >The v2.0 to V3.1 upgrade passes though v2.5 on the way. It
                    will execute scripts in the following version
                    directories:</span
                  >
                  <ul>
                    <li><span>v24_to_v25</span></li>
                    <li>
                      <span>v25_to_v31<br /></span>
                    </li>
                  </ul>
                </li>
              </ul>
              <p class="auto-cursor-target">
                The directory structure appears as follows:
              </p>
              <div class="table-wrap">
                <table
                  class="relative-table wrapped confluenceTable tablesorter tablesorter-default"
                  style="width: 100%"
                  resolved=""
                  role="grid"
                >
                  <colgroup>
                    <col style="width: 11.0249%" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 30.638%" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 58.3283%" />
                  </colgroup>
                  <thead>
                    <tr role="row" class="tablesorter-headerRow">
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="0"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Directory Name: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Directory Name
                      </th>
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="1"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="What does this directory contain?: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        What does this directory contain?
                      </th>
                      <th
                        colspan="1"
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="2"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="What scripts should you add here?: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        What scripts should you add here?
                      </th>
                    </tr>
                  </thead>
                  <tbody aria-live="polite" aria-relevant="all">
                    <tr role="row">
                      <td class="confluenceTd"><p>00 Setup</p></td>
                      <td class="confluenceTd">
                        <p>
                          The first group of scripts that is run before data
                          migration begins. Setup-type scripts, such as the
                          creation of stored procedures used during upgrade are
                          added here.<br /><br />
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>Optional: </strong>You may place custom scripts
                        that you would like to execute
                        <strong
                          >before compatibility checks or schema updates
                          begin</strong
                        >
                        here.
                        <span
                          >Scripts in each version directory will be executed in
                          numerical order.</span
                        >
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        01 Compatibility Check
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <span
                          >Ed-Fi data compatibility preconditions are checked
                          using the scripts in this directory.</span
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>None needed.</strong>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">02 Upgrade</td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Contains the core upgrade scripts for each version.
                          All SQL scripts are run in numerical order by path.
                          <span
                            >Details have been included below this chart.</span
                          >
                        </p>
                        <p>
                          The v2.0 to v3.1 upgrade will execute scripts in the
                          following version directories:
                        </p>
                        <ul>
                          <li>v24_to_v25</li>
                          <li><span>v25_to_v31</span></li>
                        </ul>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p><strong>Optional:</strong></p>
                        <ul>
                          <li>
                            You may place custom scripts that you would like to
                            execute on your <strong>v2.0</strong> database in
                            directory:
                            <strong
                              ><code>02 Upgrade\v24_to_v25\{step}</code></strong
                            >.
                          </li>
                          <li>
                            Scripts that you want to execute on a
                            <strong>v2.5</strong> database may be placed in
                            directory:
                            <code
                              ><strong
                                >02 Upgrade\v25_to_v31\{step}</strong
                              ></code
                            >.
                          </li>
                          <li>
                            Scripts in each version directory will be executed
                            in numerical order.&nbsp;
                          </li>
                          <li>
                            Details on version-specific upgrade steps are
                            included below this table.
                          </li>
                        </ul>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">03 Cleanup</td>
                      <td colspan="1" class="confluenceTd">
                        Removes temporary data generated during upgrade
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Optional: </strong>You may place custom
                          scripts that you would like to execute
                          <strong
                            >after all schema updates have been
                            performed</strong
                          >
                          here. <strong><span> </span></strong>
                        </p>
                        <p>
                          <span
                            >Scripts in will be executed in numerical order
                            order.</span
                          >
                        </p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="auto-cursor-target">
                <span class="legacy-color-text-blue3"><br /></span>
              </p>
              <h4
                id="MigrationUtility-Version-SpecificUpgradeStepDetailsforsuite2toSuite3v5.3"
              >
                Version-Specific Upgrade Step Details for suite 2 to&nbsp;Suite
                3 v5.3
              </h4>
              <p>
                The core upgrade script directory, 02 Upgrade, contains several
                upgrade steps for each version which are detailed below. You can
                insert custom scripts at any point in the process as needed for
                custom Extensions.
              </p>
              <div
                id="expander-1463925276"
                class="expand-container conf-macro output-block"
                data-hasbody="true"
                data-macro-name="expand"
                data-macro-id="458f4e1a-5cd6-4a30-a93d-6e518978436b"
                resolved=""
              >
                <div id="expander-control-1463925276" class="expand-control">
                  <span class="expand-control-icon icon">&nbsp;</span
                  ><span class="expand-control-text"
                    >v2.x to v3.4 Upgrade Steps - Click to Expand</span
                  >
                </div>
                <div
                  id="expander-content-1463925276"
                  class="expand-content expand-hidden"
                >
                  <div class="table-wrap">
                    <table
                      class="wrapped confluenceTable tablesorter tablesorter-default"
                      resolved=""
                      role="grid"
                    >
                      <colgroup>
                        <col />
                        <col />
                        <col />
                      </colgroup>
                      <thead>
                        <tr role="row" class="tablesorter-headerRow">
                          <th
                            class="numberingColumn confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="0"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label=": No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            <br />
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="1"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Step/Directory Name: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            <span class="legacy-color-text-blue3"
                              >Step/Directory Name</span
                            >
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="2"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="What is contained: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            <span class="legacy-color-text-blue3"
                              >What is contained</span
                            >
                          </th>
                        </tr>
                      </thead>
                      <tbody aria-live="polite" aria-relevant="all">
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">1</td>
                          <td class="confluenceTd">
                            <span>Source Validation Check</span>
                          </td>
                          <td class="confluenceTd">
                            <span
                              >Calculates a hash value for data key columns that
                              are to remain unchanged throughout the migration
                              process. The hash will be recalculated after all
                              schema changes have been completed. Values before
                              and after are compared. In the event of a data
                              mismatch, the migration process will be halted
                              automatically to protect data integrity.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">2</td>
                          <td class="confluenceTd">Create Upgrade Tempdata</td>
                          <td class="confluenceTd">
                            Version-specific temporary data is created here that
                            will be removed at the end of the upgrade process.
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">3</td>
                          <td class="confluenceTd">
                            <span>Drop Extended Properties</span>
                          </td>
                          <td class="confluenceTd">
                            <span
                              >Drops all extended properties on the
                              <code>edfi</code> schema before updates
                              begin.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">4</td>
                          <td class="confluenceTd"><span>Drop Views</span></td>
                          <td class="confluenceTd">
                            <p>
                              <span
                                >Contains scripts that have been automatically
                                generated to drop <code>edfi</code> views.</span
                              >
                            </p>
                            <p>
                              You may choose to insert scripts here to drop
                              custom schema bound custom views before upgrade
                              tasks begin.
                            </p>
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">5</td>
                          <td class="confluenceTd">Drop Procedures, Types</td>
                          <td class="confluenceTd">
                            <span
                              >Contains scripts that have been automatically
                              generated to drop <code>edfi</code> </span
                            ><span>default </span
                            ><span
                              >stored procedures, triggers, and types.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">6</td>
                          <td class="confluenceTd">
                            <span>Drop Constraints</span>
                          </td>
                          <td class="confluenceTd">
                            <p class="auto-cursor-target">
                              Contains dynamic scripting that drops ALL 2.0
                              constraints and indexes on the
                              <code>edfi</code> schema. Objects are dropped in
                              the following order:
                            </p>
                            <ol>
                              <li class="auto-cursor-target">Foreign Keys</li>
                              <li class="auto-cursor-target">Primary Keys</li>
                              <li class="auto-cursor-target">
                                Unique Constraints
                              </li>
                              <li class="auto-cursor-target">
                                Default Constraints
                              </li>
                              <li class="auto-cursor-target">Indexes</li>
                            </ol>
                            <p>
                              <strong>Required for most extensions:</strong
                              ><span>
                                You must drop ALL foreign keys on your extension
                                tables that have a dependency on the
                                <code>edfi</code> schema. Number your scripts
                                such that they run before the scripts are
                                executed. This will prevent a sql exception from
                                occurring when dependent items on the
                                <code>edfi</code> schema are dropped. You may
                                either perform this action during the setup
                                step, or by inserting custom scripts in this
                                directory. See the below sections for tips and
                                details.</span
                              >
                            </p>
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">7</td>
                          <td class="confluenceTd">Import Descriptors</td>
                          <td class="confluenceTd">
                            <span
                              >Imports new Ed-Fi descriptors from the included
                              xml files.&nbsp;</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">8</td>
                          <td class="confluenceTd">Create New Tables</td>
                          <td class="confluenceTd">
                            Creates tables that are brand new in
                            v5.3&nbsp;Populates new tables with existing data
                            that has moved in the latest version where
                            applicable.
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd">9</td>
                          <td class="confluenceTd">
                            <span>Update Existing Tables</span>
                          </td>
                          <td class="confluenceTd">
                            <span
                              >Makes schema changes to tables that exist in both
                              the old and the new versions.
                            </span>
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            10
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Drop Old Tables
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Drops tables no longer used in v5.3.
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            11
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Create Constraints
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <span
                              >Contains scripts that are automatically
                              generated. Creates v5.3 indexes, constraints,
                              primary keys, and foreign keys.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            12
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Create User Roles
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <span
                              >Contains script from the v5.3 ODS build to insert
                              default users.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            13
                          </td>
                          <td colspan="1" class="confluenceTd">Create Views</td>
                          <td colspan="1" class="confluenceTd">
                            <span
                              >Contains scripts from the v5.3 ODS build to
                              create v5.3 views.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            14
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Create Procedures
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <span
                              >Contains scripts from the v5.3 ODS build to
                              create v5.3 stored procedures.</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            15
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Create Extended Properties
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <span
                              >Contains scripts that are automatically
                              generated. Adds extended properties to all
                              <code>edfi</code> objects</span
                            >
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="numberingColumn confluenceTd" colspan="1">
                            16
                          </td>
                          <td colspan="1" class="confluenceTd">
                            Destination Validation Check
                          </td>
                          <td colspan="1" class="confluenceTd">
                            <span
                              >Recalculates hash values for all items that were
                              created duri</span
                            ><span>ng step: </span
                            ><span
                              ><code>Source Validation Check</code>. In the
                              event that a data change is found, the migration
                              process will halt and an error message will be
                              thrown.</span
                            >
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <h3
                id="MigrationUtility-Step9b.WritescriptstodropALLforeignkeysonyourextensiontablesthatdependontheedfischema"
              >
                <span data-colorid="hbsbdwodyy"
                  >Step 9b. Write scripts to drop ALL foreign keys on your
                  extension tables that depend on the edfi schema</span
                >
              </h3>
              <ul>
                <li>
                  All edfi primary keys and indexes are dropped automatically
                  during upgrade. The existence of any external constraint that
                  depends on edfi data will result in an error state.
                </li>
                <li>
                  You may insert these scripts in the following directory
                  <ul>
                    <li>
                      Option 1: Insert with similar Ed-Fi scripts in
                      directory:&nbsp;<code
                        >Scripts/02 Upgrade/{version}/## Drop Constraints</code
                      >
                    </li>
                    <li>
                      <span
                        >Option 2:&nbsp; (To run before all upgrade tasks
                        begin):&nbsp;&nbsp;<code
                          >Scripts/00 Setup/{version}</code
                        ><br
                      /></span>
                    </li>
                  </ul>
                </li>
                <li>
                  Scripts will be executed in numerical order. Number your
                  scripts such that they run before the edfi scripts are
                  executed. This will prevent a sql exception from occurring
                  when dependent items on the <code>edfi</code> schema are
                  dropped.
                </li>
                <li>
                  <strong
                    ><img
                      class="emoticon emoticon-information"
                      data-emoji-id="atlassian-info"
                      data-emoji-shortname=":info:"
                      data-emoji-fallback=":info:"
                      src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/information.png"
                      width="16"
                      height="16"
                      data-emoticon-name="information"
                      alt="(info)"
                    />&nbsp;Tip:</strong
                  >
                  The following query can quickly identify all constraints that
                  need to be dropped for migration to proceed. Use this as a
                  guide when writing your custom migration scripts.
                </li>
              </ul>
              <div
                class="code panel pdl conf-macro output-block"
                style="border-width: 1px"
                data-hasbody="true"
                data-macro-name="code"
                data-macro-id="283146bf-b3af-412c-819d-1cb8d7a31199"
              >
                <div
                  class="codeHeader panelHeader pdl hide-border-bottom"
                  style="border-bottom-width: 1px"
                >
                  <b class="code-title"
                    >Quickly show all external dependencies that will need to be
                    dropped</b
                  ><span class="collapse-source expand-control" style=""
                    ><span class="expand-control-icon icon">&nbsp;</span
                    ><span class="expand-control-text"
                      >Expand source</span
                    ></span
                  ><span class="collapse-spinner-wrapper"> </span>
                </div>
                <div class="codeContent panelContent pdl hide-toolbar">
                  <div>
                    <div
                      id="highlighter_329309"
                      class="syntaxhighlighter collapsed sh-confluence nogutter sql"
                    >
                      <div class="toolbar">
                        <span
                          ><a
                            href="#"
                            class="toolbar_item command_expandSource expandSource"
                            >expand source</a
                          ></span
                        ><span
                          ><a href="#" class="toolbar_item command_help help"
                            >?</a
                          ></span
                        >
                      </div>
                      <table border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr>
                            <td class="code">
                              <div
                                class="container"
                                title="Hint: double-click to select code"
                              >
                                <div
                                  class="line number1 index0 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql keyword">SELECT</code>
                                  <code class="sql keyword">DISTINCT</code>
                                </div>
                                <div
                                  class="line number2 index1 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql plain">parentSchema.</code
                                  ><code class="sql keyword">name</code>
                                  <code class="sql keyword">AS</code>
                                  <code class="sql string"
                                    >'External Schema Name'</code
                                  ><code class="sql plain">,</code>
                                </div>
                                <div
                                  class="line number3 index2 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql plain">parentObject.</code
                                  ><code class="sql keyword">name</code>
                                  <code class="sql keyword">AS</code>
                                  <code class="sql string">'Table Name'</code
                                  ><code class="sql plain">,</code>
                                </div>
                                <div
                                  class="line number4 index3 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql plain"
                                    >constraintObject.</code
                                  ><code class="sql keyword">name</code>
                                  <code class="sql keyword">AS</code>
                                  <code class="sql string"
                                    >'Constraint Name'</code
                                  ><code class="sql plain">,</code>
                                </div>
                                <div
                                  class="line number5 index4 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql plain">CONCAT(</code
                                  ><code class="sql string">'References '</code
                                  ><code class="sql plain"
                                    >, referencedSchema.</code
                                  ><code class="sql keyword">name</code
                                  ><code class="sql plain">, </code
                                  ><code class="sql string">'.'</code
                                  ><code class="sql plain"
                                    >, referencedObject.</code
                                  ><code class="sql keyword">name</code
                                  ><code class="sql plain">) </code
                                  ><code class="sql keyword">AS</code>
                                  <code class="sql plain"
                                    >[Conflict Reason],</code
                                  >
                                </div>
                                <div
                                  class="line number6 index5 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql plain">CONCAT(</code
                                  ><code class="sql string">'ALTER TABLE '</code
                                  ><code class="sql plain">, parentSchema.</code
                                  ><code class="sql keyword">name</code
                                  ><code class="sql plain">, </code
                                  ><code class="sql string">'.'</code
                                  ><code class="sql plain">, parentObject.</code
                                  ><code class="sql keyword">name</code
                                  ><code class="sql plain">, </code
                                  ><code class="sql string"
                                    >' DROP CONSTRAINT '</code
                                  ><code class="sql plain"
                                    >,&nbsp; constraintObject.</code
                                  ><code class="sql keyword">name</code
                                  ><code class="sql plain">) </code
                                  ><code class="sql keyword">AS</code>
                                  <code class="sql plain">[Example Code </code
                                  ><code class="sql keyword">For</code>
                                  <code class="sql plain">Reference]</code>
                                </div>
                                <div
                                  class="line number7 index6 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">FROM</code>
                                  <code class="sql plain"
                                    >sys.foreign_key_columns fk</code
                                  >
                                </div>
                                <div
                                  class="line number8 index7 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">INNER</code>
                                  <code class="sql color1">JOIN</code>
                                  <code class="sql plain"
                                    >sys.objects parentObject</code
                                  >
                                </div>
                                <div
                                  class="line number9 index8 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">ON</code>
                                  <code class="sql plain"
                                    >fk.parent_object_id =
                                    parentObject.object_id</code
                                  >
                                </div>
                                <div
                                  class="line number10 index9 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">INNER</code>
                                  <code class="sql color1">JOIN</code>
                                  <code class="sql plain"
                                    >sys.objects referencedObject</code
                                  >
                                </div>
                                <div
                                  class="line number11 index10 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">ON</code>
                                  <code class="sql plain"
                                    >fk.referenced_object_id =
                                    referencedObject.object_id</code
                                  >
                                </div>
                                <div
                                  class="line number12 index11 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">INNER</code>
                                  <code class="sql color1">JOIN</code>
                                  <code class="sql plain"
                                    >sys.schemas parentSchema</code
                                  >
                                </div>
                                <div
                                  class="line number13 index12 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">ON</code>
                                  <code class="sql plain"
                                    >parentObject.schema_id =
                                    parentSchema.schema_id</code
                                  >
                                </div>
                                <div
                                  class="line number14 index13 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">INNER</code>
                                  <code class="sql color1">JOIN</code>
                                  <code class="sql plain"
                                    >sys.schemas referencedSchema</code
                                  >
                                </div>
                                <div
                                  class="line number15 index14 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">ON</code>
                                  <code class="sql plain"
                                    >referencedObject.schema_id =
                                    referencedSchema.schema_id</code
                                  >
                                </div>
                                <div
                                  class="line number16 index15 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">INNER</code>
                                  <code class="sql color1">JOIN</code>
                                  <code class="sql plain"
                                    >sys.objects constraintObject</code
                                  >
                                </div>
                                <div
                                  class="line number17 index16 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">ON</code>
                                  <code class="sql plain"
                                    >constraintObject.object_id =
                                    fk.constraint_object_id</code
                                  >
                                </div>
                                <div
                                  class="line number18 index17 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql keyword">WHERE</code>
                                  <code class="sql plain"
                                    >referencedSchema.</code
                                  ><code class="sql keyword">name</code>
                                  <code class="sql plain">= </code
                                  ><code class="sql string">'edfi'</code>
                                </div>
                                <div
                                  class="line number19 index18 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql color1">AND</code>
                                  <code class="sql plain">parentSchema.</code
                                  ><code class="sql keyword">name</code>
                                  <code class="sql color1">NOT</code>
                                  <code class="sql color1">IN</code>
                                  <code class="sql plain">(</code
                                  ><code class="sql string">'edfi'</code
                                  ><code class="sql plain">, </code
                                  ><code class="sql string"
                                    >'migration_tempdata'</code
                                  ><code class="sql plain">)</code>
                                </div>
                                <div
                                  class="line number20 index19 alt1"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql color1">AND</code>
                                  <code class="sql plain"
                                    >parentObject.type = </code
                                  ><code class="sql string">'U'</code>
                                </div>
                                <div
                                  class="line number21 index20 alt2"
                                  data-bidi-marker="true"
                                >
                                  <code class="sql spaces"
                                    >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                  ><code class="sql color1">AND</code>
                                  <code class="sql plain"
                                    >referencedObject.type = </code
                                  ><code class="sql string">'U'</code>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
              <h3
                id="MigrationUtility-Step9c.CreateOtherMigrationScriptsasNeededforCustomExtensions"
              >
                Step 9c. Create Other Migration Scripts as Needed for Custom
                Extensions&nbsp;
              </h3>
              <ul>
                <li>
                  After creating scripts that drop all dependent constraints,
                  you can re-test your data migration to ensure that it will
                  complete without error. Be sure to add the&nbsp;<code
                    ><span>--</span></code
                  ><span
                    ><code>BypassExtensionValidationCheck</code> option at the
                    command line.</span
                  >
                </li>
                <li>
                  Create the remaining scripts needed to upgrade your extension
                  tables to suite 3 using the chart provided above for
                  reference.
                </li>
              </ul>
              <h3
                id="MigrationUtility-Step9d.CreateChangedRecordQueriesMigrationScriptsforCustomExtensions(Requiredonlyifthefeaturewasenabled)"
              >
                Step 9d. Create Changed Record Queries Migration Scripts for
                Custom Extensions (Required only if the feature was enabled)
              </h3>
              <ul>
                <li>
                  <a
                    href="/wiki/spaces/ODSAPI34/pages/24281647/Changed+Record+Queries"
                    data-linked-resource-id="24281647"
                    data-linked-resource-version="1"
                    data-linked-resource-type="page"
                    >Changed Record Queries</a
                  >
                  is an optional feature that was introduced in ODS 3.1. Changed
                  Record Query artifacts for the core entities will be upgraded
                  automatically by the migration utility if the feature was
                  enabled in the source database. However if you are
                  using&nbsp;Changed Record Query feature in the source ODS and
                  you have custom extensions, then the change scripts to update
                  Changed Record Query artifacts for the extension tables will
                  need to be added into the scripts folder located in Scripts/02
                  Upgrade/{Version}_Changes.
                </li>
              </ul>
              <h3 id="MigrationUtility-Step9e.UpgradeYourExtendedODS">
                Step 9e. Upgrade Your Extended ODS
              </h3>
              <ul>
                <li>
                  With all custom scripting in place, you may now proceed with
                  the upgrade as&nbsp;detailed in&nbsp;Step 6. (ODS with NO
                  Extensions Only) Run the Migration Tool, above.
                </li>
              </ul>
              <h2 id="MigrationUtility-Step10.Post-Upgrade:ReviewDataChanges">
                Step 10. Post-Upgrade: Review Data Changes&nbsp;
              </h2>
              <ol>
                <li>
                  Review warnings/action items generated during upgrade<br />
                  <ul>
                    <li>
                      By default, these will be stored in
                      <code
                        >"{YourInstallFolder}\.store\edfi.suite3.ods.utilities.migration\{YourMigrationUtilityVersion}\edfi.suite3.ods.utilities.migration\{YourMigrationUtilityVersion}\tools\netcoreapp3.1\any\Ed-Fi-Migration.log"</code
                      >
                    </li>
                    <li>
                      This message list will contain action items that my
                      require your attention
                    </li>
                  </ul>
                </li>
                <li>
                  Review your upgraded ODS.
                  <ul>
                    <li>
                      <p class="auto-cursor-target">
                        A schema named&nbsp;<code>[v2_to_v3_deprecated]</code>
                        will be created to store a copy of major objects that
                        were dropped or altered significantly during upgrade,
                        including suite 2 descriptor/type references. If
                        desired, this entire schema is safe to delete once you
                        are positive that the data contained will no longer be
                        needed.
                      </p>
                    </li>
                  </ul>
                </li>
              </ol>
              <p class="auto-cursor-target">
                Some data elements that were part of the suite 2 model are
                either no longer a part of the v3 model, or may be altered to
                meet the upgraded schema requirements. The following chart
                summarizes a list of major items that will be altered or dropped
                during upgrade
              </p>
              <div
                id="expander-11364977"
                class="expand-container conf-macro output-block"
                data-hasbody="true"
                data-macro-name="expand"
                data-macro-id="c22f5767-6af6-46bf-90bf-4a51d180ba2e"
                resolved=""
              >
                <div id="expander-control-11364977" class="expand-control">
                  <span class="expand-control-icon icon">&nbsp;</span
                  ><span class="expand-control-text"
                    >Click to expand: Objects altered or dropped during
                    upgrade</span
                  >
                </div>
                <div
                  id="expander-content-11364977"
                  class="expand-content expand-hidden"
                >
                  <p class="auto-cursor-target">
                    Objects dropped during upgrade
                  </p>
                  <div class="table-wrap">
                    <table
                      class="wrapped confluenceTable tablesorter tablesorter-default"
                      resolved=""
                      role="grid"
                    >
                      <colgroup>
                        <col style="width: 842px" />
                      </colgroup>
                      <colgroup>
                        <col style="width: 539px" />
                      </colgroup>
                      <thead>
                        <tr role="row" class="tablesorter-headerRow">
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="0"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="What: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            What
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="1"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Where to find it after upgrade: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            Where to find it after upgrade
                          </th>
                        </tr>
                      </thead>
                      <tbody aria-live="polite" aria-relevant="all">
                        <tr role="row">
                          <td class="confluenceTd">
                            <p>
                              Dropped tables no longer part of the v3 model:
                            </p>
                            <ul>
                              <li>Tables capturing Assessment Family data</li>
                              <li>
                                Some PostSecondaryInstitution related references
                                no longer used
                              </li>
                              <li>
                                suite 2 Ed-Fi Descriptors no longer part of the
                                suite 3 model
                              </li>
                            </ul>
                          </td>
                          <td class="confluenceTd">
                            Tables will be copied to schema
                            <code>[v2_to_v3_deprecated]</code> if they are not
                            empty at upgrade time
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="confluenceTd">
                            References to Ed-Fi<code> *Type</code> tables that
                            were contained in suite 2 descriptors. Types are no
                            longer a part of the suite 3 model.
                          </td>
                          <td class="confluenceTd">
                            The table<code>
                              [v2_to_v3_deprecated].[TypeToDescriptorAssociationBackup]</code
                            >
                            will contain a list of deprecated types (<code
                              >[CodeValue]</code
                            >
                            only) that were associated with Descriptors at the
                            time of upgrade.
                          </td>
                        </tr>
                        <tr role="row">
                          <td colspan="1" class="confluenceTd">
                            Characteristic data that was stored directly on
                            <code>[edfi].[Student]</code> incompatible with the
                            new model because an<code>
                              <span>[Student</span
                              >EducationOrganizationAssociation]</code
                            >
                            reference is now required beginning in v3 . This
                            includes economic disadvantaged status, school food
                            services eligibility, and displacement status.
                          </td>
                          <td colspan="1" class="confluenceTd">
                            For all students that contain non-null data in the
                            related columns on <code>[edfi].[Student]</code
                            ><span> </span>, an entry will be generated in
                            <code>[v2_to_v3_deprecated].[Student].</code>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <p class="auto-cursor-target">
                    Notes on key important items altered during upgrade
                  </p>
                  <div class="table-wrap">
                    <table
                      class="wrapped confluenceTable tablesorter tablesorter-default"
                      resolved=""
                      role="grid"
                    >
                      <colgroup>
                        <col />
                        <col />
                        <col />
                      </colgroup>
                      <thead>
                        <tr role="row" class="tablesorter-headerRow">
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="0"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Affected Objects: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            Affected Objects
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="1"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Change Description: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            Change Description
                          </th>
                          <th
                            class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                            data-column="2"
                            tabindex="0"
                            scope="col"
                            role="columnheader"
                            aria-disabled="false"
                            unselectable="on"
                            aria-sort="none"
                            aria-label="Why: No sort applied, activate to apply an ascending sort"
                            style="user-select: none"
                          >
                            Why
                          </th>
                        </tr>
                      </thead>
                      <tbody aria-live="polite" aria-relevant="all">
                        <tr role="row">
                          <td class="confluenceTd">Types, Descriptors</td>
                          <td class="confluenceTd">
                            <ul>
                              <li>
                                Namespace changed from&nbsp;suite 2&nbsp; format
                                (<code>http://{edorg}/Descriptor/{DescriptorName}.xml</code>)
                                to&nbsp;suite 3 format
                                (<code>uri://{edorg}/{DescriptorName}</code>)
                              </li>
                              <li>
                                <span>Rare</span><span>:</span
                                ><span>
                                  In the event that duplicate descriptors
                                  associated with the same organization are
                                  encountered, an integer will be added to the </span
                                ><span>[CodeValue]</span
                                ><span> for uniqueness</span>
                              </li>
                              <li>
                                New suite 3 descriptors inserted during upgrade
                                with namespace specified at upgrade time
                              </li>
                              <li>
                                In the event that a Type table was modified from
                                the default, these changed types will be
                                converted into new descriptors as well
                              </li>
                            </ul>
                            <p>
                              Note:
                              <span
                                >The state of the descriptor table with old
                                namespaces is copied to </span
                              ><code>[v2_to_v3_deprecated].[Descriptor]</code
                              ><span> at upgrade time</span>
                            </p>
                          </td>
                          <td class="confluenceTd">
                            <p>
                              Significant type/descriptor changes have occurred
                              between suite 2 and suite 3
                            </p>
                            <ul>
                              <li
                                style="
                                  list-style-type: none;
                                  background-image: none;
                                "
                              >
                                <ul>
                                  <li>
                                    Beginning in suite 3, type tables are no
                                    longer part of the model. These objects will
                                    be replaced with several Descriptors new to
                                    suite 3.
                                  </li>
                                  <li>
                                    Namespaces are now required, and must be the
                                    new v3 format exactly. The upgrade utility
                                    will do the work to convert valid suite 2
                                    namespaces to the new suite 3 format for
                                    you.
                                  </li>
                                  <li>
                                    <span
                                      >Rare: The schema requires that each
                                      combination of</span
                                    ><span> [CodeValue] + [Namespace]</span
                                    ><span>
                                      be unique for each Descriptor, which could
                                      result in potential duplicates in some
                                      cases where duplicate suite 2</span
                                    ><span> [CodeValue]</span
                                    ><span> entries exist.</span>
                                  </li>
                                </ul>
                              </li>
                            </ul>
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="confluenceTd">
                            <p>
                              <code
                                >[edfi].[Section]: <br />[UniqueSectionCode]
                                (suite 2)</code
                              >
                            </p>
                          </td>
                          <td class="confluenceTd">
                            <ul>
                              <li>
                                The suite 2 <code>[UniqueSectionCode]</code> is
                                used to create the new suite 3<code>
                                  [SectionIdentifier]</code
                                >
                              </li>
                              <li>
                                For sections that are considered duplicates
                                under the new suite 3 model, the new<code>
                                  [SectionIdentifier]</code
                                >
                                will contain the old
                                <code>[UniqueSectionCode]</code> plus an integer
                                that is automatically appended during upgrade.
                              </li>
                            </ul>
                          </td>
                          <td class="confluenceTd">
                            <p>
                              In the older suite 2 model, the primary key on
                              <code>[edfi].[Section]</code> permits a
                              <code>[UniqueSectionCode]</code> can be associated
                              with the same School/Session/Course multiple
                              times.
                            </p>
                            <p>
                              As of suite 3, the key has been simplified. A
                              <code>[SectionIdentifier]</code> can only be
                              associated with the same School/Session/Course
                              once.
                            </p>
                          </td>
                        </tr>
                        <tr role="row">
                          <td class="confluenceTd">
                            <code>[edfi].[Session]: </code><br /><code
                              ><span>[SessionName]</span></code
                            >
                          </td>
                          <td class="confluenceTd">
                            <ul>
                              <li>
                                In the event that there are two sessions with
                                the same <code>[SessionName]</code> are
                                associated with the same school and year, the
                                new <code>[SessionName]</code> after upgrading
                                will include the name of the associated term.
                              </li>
                            </ul>
                          </td>
                          <td class="confluenceTd">
                            In the older suite 2 model, the Session table used
                            <code>[TermDescriptorId]</code> in the key. The
                            suite 3 key replaces
                            <code>[TermDescriptorId]</code> with
                            <code>[SessionName] </code>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="cell aside" data-type="aside">
            <div class="innerCell">
              <p><br /></p>
            </div>
          </div>
        </div>
        <div class="columnLayout single" data-layout="single">
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-Ed-FiODSMigrationToolParameterReference">
                Ed-Fi ODS Migration Tool Parameter Reference
              </h2>
              <div class="table-wrap">
                <table
                  class="wrapped confluenceTable tablesorter tablesorter-default"
                  resolved=""
                  role="grid"
                >
                  <colgroup>
                    <col />
                    <col />
                    <col />
                    <col />
                  </colgroup>
                  <thead>
                    <tr role="row" class="tablesorter-headerRow">
                      <th
                        colspan="1"
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="0"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Parameter: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Parameter
                      </th>
                      <th
                        colspan="1"
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="1"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Description: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Description
                      </th>
                      <th
                        colspan="1"
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="2"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Example: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Example
                      </th>
                      <th
                        colspan="1"
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="3"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Required?: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Required?
                      </th>
                    </tr>
                  </thead>
                  <tbody aria-live="polite" aria-relevant="all">
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <pre>--Database</pre>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        Database Connection String
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <pre>
--Database "Data Source=YOUR\SQLSERVER;Initial Catalog=Your_EdFi_Ods_Database;Integrated Security=True"</pre
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>Yes</strong>
                      </td>
                    </tr>
                    <tr role="row">
                      <td class="confluenceTd"><pre>--Engine</pre></td>
                      <td class="confluenceTd">
                        Database Engine Type (SQLServer or PostgreSQL)
                      </td>
                      <td class="confluenceTd">
                        <pre>--Engine PostgreSQL</pre>
                      </td>
                      <td class="confluenceTd">
                        <p><strong>No </strong>(Defaults to SQLServer)&nbsp;</p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <pre>--DescriptorNamespace</pre>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Descriptor Namespace prefix to be used for new and
                          upgraded descriptors.
                        </p>
                        <p>
                          Namespace must be provided in suite 3 format as
                          follows:
                          <code>uri://[education_organization_here]</code>
                        </p>
                        <p>
                          Valid characters for an education organization
                          name:&nbsp; alphanumeric and <code>$-_.+!*'(),</code>
                        </p>
                        <p>
                          Script Usage: Provided string value will be escaped
                          and substituted directly in applicable sql where the
                          <code>$DescriptorNamespace$</code> variable is used
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <pre>--DescriptorNamespace "uri://ed-fi.org"</pre>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>Yes</strong>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <pre>--CredentialNamespace</pre>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Namespace prefix to be used for all new Credential
                          records.
                        </p>
                        <p>
                          Namespace must be provided in suite 3 format as
                          follows:
                          <code>uri://[education_organization_here]</code>
                        </p>
                        <p>
                          Valid characters for an education organization
                          name:&nbsp; alphanumeric and <code>$-_.+!*'(),</code>
                        </p>
                        <p>
                          Script Usage: Provided string value will be escaped
                          and substituted directly in applicable SQL where the
                          <code>$CredentialNamespace$</code> variable is used.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <pre>--CredentialNamespace "uri://ed-fi.org"</pre>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Yes,</strong>
                          <strong
                            >if table edfi.StaffCredential has data</strong
                          >
                        </p>
                        <p>
                          Optional if table edfi.StaffCredential is empty<br /><br />
                        </p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <pre>--CalendarConfigFilePath</pre>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Path to calendar configuration, which must be
                          accessible from your sql server.
                        </p>
                        <p>
                          Script Usage: Provided string value will be
                          substituted directly in dynamic SQL where the
                          <code>$CalendarConfigFilePath$</code> variable is
                          used. The<code> '</code> character is not permitted by
                          the upgrade utility for this value.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <pre>
--CalendarConfigFilePath "C:\PATH\TO\YOUR\CALENDAR_CONFIG.csv"</pre
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Single-Year</strong>
                          <strong>ODS: No</strong> (unless prompted by the
                          upgrade tool)
                        </p>
                        <p>
                          <strong>Multi-Year</strong> <strong>ODS: Yes</strong>
                        </p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <code>--DescriptorXMLDirectoryPath</code>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Path to directory containing 3.1 descriptors for
                          import, which must be accessible from your sql server
                        </p>
                        <p><br /></p>
                        <p>
                          Script Usage: Provided string value will be
                          substituted directly in dynamic SQL where the
                          <code>$DescriptorXMLImportDirectoryPath$</code>
                          variable is used. The<code> '</code> character is not
                          permitted by the upgrade utility for this value.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <code
                          >--DescriptorXMLDirectoryPath&nbsp;"C:\PATH\TO\YOUR\DESCRIPTOR\XML"</code
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong>Local Upgrade</strong>:
                          <strong>No </strong>(applicable to most cases)
                        </p>
                        <p>
                          <strong>Remote Upgrade</strong>: <strong>Yes</strong>
                        </p>
                        <p>
                          Used if the Descriptor XML directory has been moved to
                          a different location accessible to your sql server
                        </p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td class="confluenceTd">
                        <code>--BypassExtensionValidationCheck</code>
                      </td>
                      <td class="confluenceTd">
                        Permits the migration tool to make changes if extensions
                        or external schema dependencies have been found
                      </td>
                      <td class="confluenceTd">
                        <code>--BypassExtensionValidationCheck</code>
                      </td>
                      <td class="confluenceTd">
                        <p>
                          <strong>Extended</strong>
                          <strong>ODS: Yes</strong> This includes any dataset
                          with an extension schema or foreign keys pointing to
                          the Ed-Fi schema.
                        </p>
                        <p><strong>Others</strong>: <strong>No</strong></p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <code>--CompatibilityCheckOnly</code>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        Perform a dry run for testing only to check ODS
                        compatibility without making additional changes.
                        <strong>The database will not be upgraded.</strong>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <code>--CompatibilityCheckOnly<br /></code>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p><strong>No. </strong>This is an optional feature.</p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <code>--Timeout</code>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        SQL command query timeout, in seconds.
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <code>--Timeout 1200</code>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>No.</strong> (Useful mainly for development and
                        testing purposes)
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <code>--ScriptPath</code>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        Path to the location of the SQL scripts to apply for
                        upgrade, if they have been moved
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <code
                          >--ScriptPath&nbsp;"C:\PATH\TO\YOUR\MIGRATION_SCRIPTS"</code
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>No.</strong> (Only needed if scripts have been
                        moved from the default location. Useful mainly for
                        development and testing purposes)
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">--FromVersion</td>
                      <td colspan="1" class="confluenceTd">
                        The ODS/API version you are starting from.&nbsp;
                      </td>
                      <td colspan="1" class="confluenceTd">
                        --FromVersion "3.1.1"
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>No. </strong>Migration utility will detect your
                        staring point.
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">--ToVersion</td>
                      <td colspan="1" class="confluenceTd">
                        The ODS/API version that you would like upgrade
                        to.&nbsp;
                      </td>
                      <td colspan="1" class="confluenceTd">
                        --ToVersion "5.3"
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <strong>No. </strong>Migration utility will take you to
                        the latest version by default.
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <p class="auto-cursor-target">
                <span
                  class="confluence-anchor-link conf-macro output-inline"
                  id="MigrationUtility-#TroubleshootingGuide"
                  data-hasbody="false"
                  data-macro-name="anchor"
                  data-macro-id="b72c7ba9-f321-472d-9d18-79b85f55cbec"
                  ><span
                    class="confluence-anchor-link"
                    id="#TroubleshootingGuide"
                  >
                  </span
                ></span>
              </p>
            </div>
          </div>
        </div>
        <div class="columnLayout single" data-layout="single">
          <div class="cell normal" data-type="normal">
            <div class="innerCell">
              <h2 id="MigrationUtility-UsageTroubleshootingGuide">
                Usage Troubleshooting Guide
              </h2>
              <p>
                The below section provides additional guidance for many common
                compatibility issues that can be encountered during the upgrade
                process.
              </p>
              <div class="table-wrap">
                <table
                  class="fixed-table wrapped confluenceTable tablesorter tablesorter-default"
                  resolved=""
                  role="grid"
                >
                  <colgroup>
                    <col style="width: 389px" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 601px" />
                  </colgroup>
                  <colgroup>
                    <col style="width: 733px" />
                  </colgroup>
                  <thead>
                    <tr role="row" class="tablesorter-headerRow">
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="0"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Error received during upgrade: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Error received during upgrade
                      </th>
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="1"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="Explanation: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        Explanation
                      </th>
                      <th
                        class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted"
                        data-column="2"
                        tabindex="0"
                        scope="col"
                        role="columnheader"
                        aria-disabled="false"
                        unselectable="on"
                        aria-sort="none"
                        aria-label="How to fix it: No sort applied, activate to apply an ascending sort"
                        style="user-select: none"
                      >
                        How to fix it
                      </th>
                    </tr>
                  </thead>
                  <tbody aria-live="polite" aria-relevant="all">
                    <tr role="row">
                      <td class="confluenceTd">
                        <p>
                          <strong>Action Required:&nbsp;</strong> Unable to
                          proceed with migration because the
                          BypassExtensionValidationCheck option is disabled ...
                        </p>
                      </td>
                      <td class="confluenceTd">
                        <p>
                          <span
                            >An external dependency on the edfi schema has been
                            found. As a courtesy, the migration tool will not
                            proceed with the upgrade process without your
                            permission.
                          </span>
                        </p>
                        <p>
                          <span><strong>Common Examples:</strong> </span>
                        </p>
                        <ul>
                          <li>You have a table on the extension schema</li>
                          <li>
                            <span
                              >An object on
                              <strong
                                >any schema other than <code>edfi</code></strong
                              >
                              has a foreign key that depends directly on data on
                              the <code>edfi</code> schema</span
                            >
                          </li>
                        </ul>
                        <p>
                          <strong>Why:</strong> This notification is intended to
                          bring extension items to your attention that will
                          require manual handling. All primary keys and indexes
                          on the <code>edfi</code> schema are dropped during
                          upgrade. The existence of any external constraint that
                          depends on these objects will result in an unhandled
                          sql exception. (For details, see the troubleshooting
                          section: <code>"</code
                          ><span
                            ><code
                              >SqlException : The constraint
                              '{CONSTRAINT_NAME_HERE}' is being referenced by
                              table '{TABLE_NAME_HERE}', foreign key constraint
                              '{FORIEGN_KEY_NAME_HERE}'"</code
                            >
                          </span>
                        </p>
                      </td>
                      <td class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            <span
                              >After reviewing the data and dependencies on your
                              extension tables, add the </span
                            ><code>--</code
                            ><span
                              ><code>BypassExtensionValidationCheck</code>
                              option at the command line. This will give the
                              migration tool permission to proceed even if there
                              are extension items present.</span
                            >
                          </p>
                          <p>
                            Please review Step 8. Write Custom Migration Scripts
                            for Extensions (above) before proceeding.
                          </p>
                          <p><br /></p>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <strong
                          >Action Required: edfi.StaffCredential ...</strong
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <span>The column </span
                        ><code
                          ><strong
                            >StateOfIssueStateAbbreviationTypeId</strong
                          > </code
                        ><span
                          >must be non-null for all records. This value will
                          become part of a new primary key on the 3.1
                          schema.</span
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            <span>Add a </span
                            >[StateOfIssueStateAbbreviationTypeId]
                            <span>for all records in </span
                            >[edfi].[StaffCredential]<span>. </span>This is the
                            abbreviation for the name of the state (within the
                            United States) or extra-state jurisdiction in which
                            a license or credential was issued.
                          </p>
                          <p>
                            <span class="legacy-color-text-green2"
                              ><img
                                class="emoticon emoticon-tick"
                                data-emoji-id="atlassian-check_mark"
                                data-emoji-shortname=":check_mark:"
                                data-emoji-fallback=":check_mark:"
                                src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/check.png"
                                width="16"
                                height="16"
                                data-emoticon-name="tick"
                                alt="(tick)"
                              />
                              The table is compatible for upgrade if the below
                              query returns 0 results.</span
                            >
                          </p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="2320bebe-4d2f-4efb-9e28-fa1626e9e640"
                          >
                            <div
                              class="codeHeader panelHeader pdl hide-border-bottom"
                              style="border-bottom-width: 1px"
                            >
                              <b class="code-title">Expand to see code</b
                              ><span
                                class="collapse-source expand-control"
                                style=""
                                ><span class="expand-control-icon icon"
                                  >&nbsp;</span
                                ><span class="expand-control-text"
                                  >Expand source</span
                                ></span
                              ><span class="collapse-spinner-wrapper"> </span>
                            </div>
                            <div
                              class="codeContent panelContent pdl hide-toolbar"
                            >
                              <div>
                                <div
                                  id="highlighter_392221"
                                  class="syntaxhighlighter collapsed sh-midnight nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_expandSource expandSource"
                                        >expand source</a
                                      ></span
                                    ><span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain">*</code>
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[StaffCredential]</code
                                              >
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >WHERE</code
                                              >
                                              <code class="sql plain"
                                                >[StateOfIssueStateAbbreviationTypeId] </code
                                              ><code class="sql keyword"
                                                >IS</code
                                              >
                                              <code class="sql color1"
                                                >NULL</code
                                              >
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <strong
                            >Action Required - An EducationOrganizationId must
                            be resolvable for every student in the following
                            table(s) for compatibility with the upgraded schema
                            starting in version 3.0:</strong
                          >
                        </p>
                        <p>
                          <strong
                            >(Provided list of tables includes one or more of
                            the following):</strong
                          >
                        </p>
                        <ul>
                          <li>edfi.StudentProgramParticipation</li>
                          <li>edfi.StudentCharacteristic</li>
                          <li>edfi.StudentIndicator</li>
                          <li>edfi.StudentLearningStyle</li>
                          <li>edfi.StudentAddress</li>
                          <li>edfi.StudentIdentificationCode</li>
                          <li>edfi.StudentElectronicMail</li>
                          <li>edfi.StudentInternationalAddress</li>
                          <li>edfi.StudentLanguage</li>
                          <li>edfi.StudentRace</li>
                          <li>edfi.StudentDisability</li>
                          <li>edfi.StudentTelephone</li>
                          <li>
                            edfi.PostSecondaryEventPostSecondaryInstitution
                          </li>
                        </ul>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <span
                            >The upgrade utility must be able to locate an </span
                          ><strong>[EducationOrganizationId] </strong
                          ><span
                            >for every student with data in the listed tables to
                            proceed.
                          </span>
                        </p>
                        <p>
                          Beginning in v3.1, the schema structure now requires
                          that these student information items be defined
                          separately for each associated EducationOrganization
                          rather than simply linking them to a student.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          The easiest way to meet this requirement is to ensure
                          that every student has a corresponding record in
                          <strong>[edfi].[StudentSchoolAssociation]</strong> or
                          <strong
                            >[edfi].[StudentEducationOrganizationAssociation].
                          </strong>
                        </p>
                        <p>
                          The upgrade tool will use this information to handle
                          the rest of the data conversion tasks for you.
                        </p>
                        <p>
                          <em><br /></em>
                        </p>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <strong>Action Required: edfi.Assessment ...</strong>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        All assessments must have a [Namespace] set. (This data
                        may be found in [edfi].[Assessment] or
                        [edfi].[AssessmentFamily]). In suite 3, the schema
                        required that this column be non-null.
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p>Add a [Namespace] for all assessment records.</p>
                          <p>
                            <span class="legacy-color-text-green2"
                              ><img
                                class="emoticon emoticon-tick"
                                data-emoji-id="atlassian-check_mark"
                                data-emoji-shortname=":check_mark:"
                                data-emoji-fallback=":check_mark:"
                                src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/check.png"
                                width="16"
                                height="16"
                                data-emoticon-name="tick"
                                alt="(tick)"
                              />
                              The table is compatible for upgrade if the below
                              query returns 0 results</span
                            >
                          </p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="9fd116b1-177e-4f14-a25d-6fb4b52d7fca"
                          >
                            <div
                              class="codeHeader panelHeader pdl hide-border-bottom"
                              style="border-bottom-width: 1px"
                            >
                              <b class="code-title">Expand to see code</b
                              ><span
                                class="collapse-source expand-control"
                                style=""
                                ><span class="expand-control-icon icon"
                                  >&nbsp;</span
                                ><span class="expand-control-text"
                                  >Expand source</span
                                ></span
                              ><span class="collapse-spinner-wrapper"> </span>
                            </div>
                            <div
                              class="codeContent panelContent pdl hide-toolbar"
                            >
                              <div>
                                <div
                                  id="highlighter_279812"
                                  class="syntaxhighlighter collapsed sh-midnight nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_expandSource expandSource"
                                        >expand source</a
                                      ></span
                                    ><span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain">*</code>
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[Assessment] a</code
                                              >
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql color2"
                                                >LEFT</code
                                              >
                                              <code class="sql color1"
                                                >JOIN</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[AssessmentFamily]
                                                f</code
                                              >
                                            </div>
                                            <div
                                              class="line number4 index3 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql spaces"
                                                >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                              ><code class="sql keyword"
                                                >ON</code
                                              >
                                              <code class="sql plain"
                                                >a.[AssessmentFamilyTitle] =
                                                f.[AssessmentFamilyTitle]</code
                                              >
                                            </div>
                                            <div
                                              class="line number5 index4 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >WHERE</code
                                              >
                                              <code class="sql color2"
                                                >COALESCE</code
                                              ><code class="sql plain"
                                                >(a.[Namespace], f.[Namespace]) </code
                                              ><code class="sql keyword"
                                                >IS</code
                                              >
                                              <code class="sql color1"
                                                >NULL</code
                                              >
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <strong
                          >Action Required: edfi.OpenStaffPosition ...</strong
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          There may be no two duplicate&nbsp;<code
                            ><strong>RequisitionNumber</strong>&nbsp;</code
                          >entries for the same education organization.
                        </p>
                        <p>
                          This is uniqueness if required for the upgraded
                          primary key on this table.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            Update the <strong>RequisitionNumber</strong> values
                            on <strong>edfi.OpenStaffPosition.</strong> Ensure
                            that the same value is not used twice for the the
                            same education organization.
                          </p>
                          <p>
                            <span class="legacy-color-text-green2"
                              ><img
                                class="emoticon emoticon-tick"
                                data-emoji-id="atlassian-check_mark"
                                data-emoji-shortname=":check_mark:"
                                data-emoji-fallback=":check_mark:"
                                src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/check.png"
                                width="16"
                                height="16"
                                data-emoticon-name="tick"
                                alt="(tick)"
                              />
                              The table is compatible for upgrade if the below
                              query returns </span
                            ><span class="legacy-color-text-green2">0</span
                            ><span class="legacy-color-text-green2">
                              results.</span
                            >
                          </p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="935d4ce2-7fa2-4644-aa76-865a0fee4e4d"
                          >
                            <div
                              class="codeHeader panelHeader pdl hide-border-bottom"
                              style="border-bottom-width: 1px"
                            >
                              <b class="code-title">Expand to see code</b
                              ><span
                                class="collapse-source expand-control"
                                style=""
                                ><span class="expand-control-icon icon"
                                  >&nbsp;</span
                                ><span class="expand-control-text"
                                  >Expand source</span
                                ></span
                              ><span class="collapse-spinner-wrapper"> </span>
                            </div>
                            <div
                              class="codeContent panelContent pdl hide-toolbar"
                            >
                              <div>
                                <div
                                  id="highlighter_671501"
                                  class="syntaxhighlighter collapsed sh-midnight nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_expandSource expandSource"
                                        >expand source</a
                                      ></span
                                    ><span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain"
                                                >[EducationOrganizationId],
                                                [RequisitionNumber], </code
                                              ><code class="sql color2"
                                                >COUNT</code
                                              ><code class="sql plain"
                                                >([RequisitionNumber]) </code
                                              ><code class="sql keyword"
                                                >AS</code
                                              >
                                              <code class="sql plain"
                                                >[NumberOfMatchingRecords]</code
                                              >
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[OpenStaffPosition]</code
                                              >
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >GROUP</code
                                              >
                                              <code class="sql keyword"
                                                >BY</code
                                              >
                                              <code class="sql plain"
                                                >[EducationOrganizationId],
                                                [RequisitionNumber]</code
                                              >
                                            </div>
                                            <div
                                              class="line number4 index3 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >HAVING</code
                                              >
                                              <code class="sql color2"
                                                >COUNT</code
                                              >
                                              <code class="sql plain"
                                                >([RequisitionNumber]) &gt;
                                                1</code
                                              >
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <strong
                          >Action Required: edfi.RestraintEvent ...</strong
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          There may be no two duplicate&nbsp;<code
                            ><strong>RestraintEventIdentifier</strong
                            >&nbsp;</code
                          >values for the same student at the same school.
                        </p>
                        <p>
                          <span
                            >This is uniqueness if required for the upgraded
                            primary key on this table.</span
                          >
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            Update the
                            <strong
                              ><code>RestraintEventIdentifier </code></strong
                            >values on <strong>edfi.RestraintEvent</strong>.
                            Ensure that the same
                            <strong
                              ><code>RestraintEventIdentifier </code></strong
                            >is not reused for the same student at the same
                            school.
                          </p>
                          <p>
                            <span class="legacy-color-text-green2"
                              ><img
                                class="emoticon emoticon-tick"
                                data-emoji-id="atlassian-check_mark"
                                data-emoji-shortname=":check_mark:"
                                data-emoji-fallback=":check_mark:"
                                src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/check.png"
                                width="16"
                                height="16"
                                data-emoticon-name="tick"
                                alt="(tick)"
                              />
                              The table is compatible for upgrade if the below
                              query returns </span
                            ><span class="legacy-color-text-green2">0</span
                            ><span class="legacy-color-text-green2">
                              results.</span
                            >
                          </p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="e76dfa4d-6fc9-4d3b-b6f4-c020638ed9dc"
                          >
                            <div
                              class="codeHeader panelHeader pdl hide-border-bottom"
                              style="border-bottom-width: 1px"
                            >
                              <b class="code-title">Expand to see code</b
                              ><span
                                class="collapse-source expand-control"
                                style=""
                                ><span class="expand-control-icon icon"
                                  >&nbsp;</span
                                ><span class="expand-control-text"
                                  >Expand source</span
                                ></span
                              ><span class="collapse-spinner-wrapper"> </span>
                            </div>
                            <div
                              class="codeContent panelContent pdl hide-toolbar"
                            >
                              <div>
                                <div
                                  id="highlighter_203253"
                                  class="syntaxhighlighter collapsed sh-midnight nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_expandSource expandSource"
                                        >expand source</a
                                      ></span
                                    ><span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain"
                                                >[RestraintEventIdentifier],
                                                [SchoolId], [StudentUSI], </code
                                              ><code class="sql color2"
                                                >COUNT</code
                                              ><code class="sql plain"
                                                >([RestraintEventIdentifier]) </code
                                              ><code class="sql keyword"
                                                >AS</code
                                              >
                                              <code class="sql plain"
                                                >[NumberOfDuplicateRecords]</code
                                              >
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[RestraintEvent]</code
                                              >
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >GROUP</code
                                              >
                                              <code class="sql keyword"
                                                >BY</code
                                              >
                                              <code class="sql plain"
                                                >[RestraintEventIdentifier],
                                                [SchoolId], [StudentUSI]</code
                                              >
                                            </div>
                                            <div
                                              class="line number4 index3 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >HAVING</code
                                              >
                                              <code class="sql color2"
                                                >COUNT</code
                                              ><code class="sql plain"
                                                >([RestraintEventIdentifier])
                                                &gt; 1</code
                                              >
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <strong>Action Required: edfi.GradingPeriod ...</strong>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        There may be no two duplicate&nbsp;<code
                          ><strong>PeriodSequence</strong>&nbsp;</code
                        ><span
                          >values for the same school during the same grading
                          period.</span
                        >
                        <p>
                          Additionally, if prompted by the upgrade tool,
                          all&nbsp;<code
                            ><strong>PeriodSequence</strong>&nbsp;</code
                          >values must be non-null.
                        </p>
                        <p>
                          This compatibility requirement is a result of a
                          primary key change between suite 2&nbsp;and suite 3
                        </p>
                        <ul>
                          <li>
                            <strong>Old suite 2 Primary Key:</strong
                            >&nbsp;GradingPeriodDescriptorId, SchoolId,
                            BeginDate
                          </li>
                          <li>
                            <strong>New suite 3&nbsp;Primary Key:&nbsp;</strong
                            >GradingPeriodDescriptorId, SchoolId,&nbsp;<span
                              class="legacy-color-text-green4"
                              ><strong>PeriodSequence</strong>&nbsp;<strong
                                >(new)</strong
                              ></span
                            >,&nbsp;<strong
                              ><span class="legacy-color-text-green4"
                                >SchoolYear (new)</span
                              ></strong
                            >. <em>(BeginDate is removed.)</em>
                          </li>
                        </ul>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            Ensure that there are no two records with the
                            same&nbsp;<strong>SchoolId</strong>,&nbsp;<strong>GradingPeriodDescriptorId</strong>,&nbsp;<strong>PeriodSequence</strong>,
                            and&nbsp;<strong>SchoolYear</strong>.
                          </p>
                          <ul>
                            <li
                              style="
                                list-style-type: none;
                                background-image: none;
                              "
                            >
                              <ul>
                                <li>
                                  <p>
                                    Note:
                                    The&nbsp;<code>edfi.GradingPeriod</code>&nbsp;new&nbsp;<code>SchoolYear</code>&nbsp;column
                                    is derived from the old suite
                                    2&nbsp;<code>BeginDate</code>&nbsp;value.
                                    The SchoolYear from your calendar
                                    configuration will be used.
                                  </p>
                                </li>
                                <li>
                                  If there are multiple records with the
                                  same&nbsp;<strong>SchoolId</strong>,&nbsp;<strong>GradingPeriodDescriptorId</strong>,&nbsp;<strong>PeriodSequence</strong>,
                                  and&nbsp;<strong>SchoolYear</strong>&nbsp;you
                                  must make changes to ensure that all records
                                  are unique.&nbsp;<br />
                                  <ul>
                                    <li>
                                      <em
                                        >Tip: Depending on the needs of your
                                        organization, you may decide to remove
                                        unneeded conflicting records, update the
                                        <span>edfi.GradingPeriod.</span
                                        >PeriodSequence values, or assign a
                                        different value to
                                        edfi.GradingPeriod.PeriodSequence.GradingPeriodDescriptorId.</em
                                      >
                                    </li>
                                  </ul>
                                </li>
                              </ul>
                            </li>
                          </ul>
                          <p>
                            <em
                              ><span class="legacy-color-text-green2">
                                <img
                                  class="emoticon emoticon-tick"
                                  data-emoji-id="atlassian-check_mark"
                                  data-emoji-shortname=":check_mark:"
                                  data-emoji-fallback=":check_mark:"
                                  src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/check.png"
                                  width="16"
                                  height="16"
                                  data-emoticon-name="tick"
                                  alt="(tick)" /></span></em
                            ><span class="legacy-color-text-green2">
                              Tip: You can be certain that the table is
                              compatible for upgrade if the below query returns </span
                            ><span class="legacy-color-text-green2">0</span
                            ><span class="legacy-color-text-green2">
                              results.
                            </span>
                          </p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="55250ab0-a0b3-46fc-82a8-fd2e0f061a1d"
                          >
                            <div
                              class="codeHeader panelHeader pdl hide-border-bottom"
                              style="border-bottom-width: 1px"
                            >
                              <b class="code-title"
                                >Version 1 - Simplified Calendar: Expand to see
                                code</b
                              ><span
                                class="collapse-source expand-control"
                                style=""
                                ><span class="expand-control-icon icon"
                                  >&nbsp;</span
                                ><span class="expand-control-text"
                                  >Expand source</span
                                ></span
                              ><span class="collapse-spinner-wrapper"> </span>
                            </div>
                            <div
                              class="codeContent panelContent pdl hide-toolbar"
                            >
                              <div>
                                <div
                                  id="highlighter_624918"
                                  class="syntaxhighlighter collapsed sh-midnight nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_expandSource expandSource"
                                        >expand source</a
                                      ></span
                                    ><span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain"
                                                >[SchoolId],
                                                [GradingPeriodDescriptorId],
                                                [PeriodSequence], </code
                                              ><code class="sql color2"
                                                >COUNT</code
                                              ><code class="sql plain"
                                                >([PeriodSequence]) </code
                                              ><code class="sql keyword"
                                                >AS</code
                                              >
                                              <code class="sql plain"
                                                >[NumberOfDuplicateRecords]</code
                                              >
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[GradingPeriod]</code
                                              >
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >GROUP</code
                                              >
                                              <code class="sql keyword"
                                                >BY</code
                                              >
                                              <code class="sql plain"
                                                >[SchoolId],
                                                [GradingPeriodDescriptorId],
                                                [PeriodSequence]</code
                                              >
                                            </div>
                                            <div
                                              class="line number4 index3 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >HAVING</code
                                              >
                                              <code class="sql color2"
                                                >COUNT</code
                                              ><code class="sql plain"
                                                >([PeriodSequence]) &gt; 1</code
                                              >
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                          <p class="auto-cursor-target">
                            (Requirements may be less strict than noted in the
                            above query for some some multi-year Calendars. See
                            the compatibility check script in the 01 Bootstrap
                            directory for exact technical requirements.)
                          </p>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <strong
                          >Action Required:
                          edfi.DisciplineActionDisciplineIncident ...</strong
                        >
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          Every record in
                          [edfi].[DisciplineActionDisciplineIncident] must have
                          a corresponding record in
                          [edfi].[StudentDisciplineIncidentAssociation] with the
                          same [StudentUSI], [SchoolId], and
                          [IncidentIdentifier].
                        </p>
                        <p>
                          The V3 schema no longer allowed discipline action
                          records with students that are not associated with the
                          discipline incident. A foreign key will be added to
                          the new schema enforcing this.
                        </p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <ul>
                            <li>
                              Remove any records in
                              <span>
                                [edfi].[DisciplineActionDisciplineIncident] </span
                              ><span
                                >that involve a student not associated with the
                                incident.
                              </span>
                            </li>
                            <li>
                              <span
                                >For students that are involved in the incident,
                                add a corresponding record to
                                [edfi].[StudentDisciplineIncidentAssociation]
                                with the same [StudentUSI], [SchoolId], and
                                [IncidentIdentifier].</span
                              >
                            </li>
                          </ul>
                          <p>
                            <span class="legacy-color-text-green2"
                              ><img
                                class="emoticon emoticon-tick"
                                data-emoji-id="atlassian-check_mark"
                                data-emoji-shortname=":check_mark:"
                                data-emoji-fallback=":check_mark:"
                                src="/wiki/s/-2130697064/6452/c835f3442d3a383d79ba2a618b15c9980df639e5/_/images/icons/emoticons/check.png"
                                width="16"
                                height="16"
                                data-emoticon-name="tick"
                                alt="(tick)"
                              />
                              The table is compatible for upgrade if the below
                              query returns 0 results</span
                            >
                          </p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="484c7ecb-9469-40f0-b3ce-d7760983df8e"
                          >
                            <div
                              class="codeHeader panelHeader pdl hide-border-bottom"
                              style="border-bottom-width: 1px"
                            >
                              <b class="code-title">Expand to see code</b
                              ><span
                                class="collapse-source expand-control"
                                style=""
                                ><span class="expand-control-icon icon"
                                  >&nbsp;</span
                                ><span class="expand-control-text"
                                  >Expand source</span
                                ></span
                              ><span class="collapse-spinner-wrapper"> </span>
                            </div>
                            <div
                              class="codeContent panelContent pdl hide-toolbar"
                            >
                              <div>
                                <div
                                  id="highlighter_68352"
                                  class="syntaxhighlighter collapsed sh-midnight nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_expandSource expandSource"
                                        >expand source</a
                                      ></span
                                    ><span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain">d.*</code>
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[DisciplineActionDisciplineIncident]
                                                d</code
                                              >
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql color2"
                                                >LEFT</code
                                              >
                                              <code class="sql color1"
                                                >JOIN</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[StudentDisciplineIncidentAssociation]
                                                s</code
                                              >
                                            </div>
                                            <div
                                              class="line number4 index3 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >ON</code
                                              >
                                              <code class="sql plain"
                                                >s.[StudentUSI] =
                                                d.[StudentUSI]</code
                                              >
                                            </div>
                                            <div
                                              class="line number5 index4 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql spaces"
                                                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                              ><code class="sql color1"
                                                >AND</code
                                              >
                                              <code class="sql plain"
                                                >s.[SchoolId] =
                                                d.[SchoolId]</code
                                              >
                                            </div>
                                            <div
                                              class="line number6 index5 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql spaces"
                                                >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code
                                              ><code class="sql color1"
                                                >AND</code
                                              >
                                              <code class="sql plain"
                                                >s.[IncidentIdentifier] =
                                                d.[IncidentIdentifier]</code
                                              >
                                            </div>
                                            <div
                                              class="line number7 index6 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >WHERE</code
                                              >
                                              <code class="sql plain"
                                                >s.[StudentUSI] </code
                                              ><code class="sql keyword"
                                                >IS</code
                                              >
                                              <code class="sql color1"
                                                >NULL</code
                                              >
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p class="auto-cursor-target">
                            <span
                              ><strong
                                >Calendar configuration file error -</strong
                              >
                              <em
                                >various similar messages may appear that
                                mention a <strong>table name</strong> and a list
                                of <strong>school ids</strong>.</em
                              ></span
                            >
                          </p>
                          <p>
                            <span>Example error:</span
                            ><span>Found {#} date ranges</span><span> in</span
                            ><strong>
                              [edfi].[<span data-colorid="mg8qz379ga"
                                ><code>
                                  Table name will vary: Session, CalendarDate,
                                  GradingPeriod</code
                                ></span
                              >]</strong
                            ><span>
                              which did not fall within the dates specified in
                              the calendar configuration. The top 10 affected
                              schools will be listed</span
                            >
                          </p>
                          <p>
                            <span><br /></span>
                          </p>
                          <p><br /></p>
                        </div>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          <span
                            >The calendar configuration file contains the start
                            date and end date for each school year. To support
                            the new calendar features in V3, the migration tool
                            uses this configuration file to assign a SchoolYear
                            to all CalendarDate related entries in the
                            database.</span
                          >
                        </p>
                        <p>
                          There are several variations of this type of error
                          which all have a similar meaning. The migration tool
                          found date records in the specified table that could
                          not be assigned a school year based on the BeginDate
                          and EndDate information provided.
                        </p>
                        <p><br /></p>
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            Either the calendar configuration file will need to
                            be edited, or data in the specified table will need
                            to be modified.
                          </p>
                          <ol>
                            <li>
                              Make note of the list of
                              <strong>School Ids</strong> and the<strong>
                                Table </strong
                              >name provided in the error message.
                            </li>
                            <li>
                              Open your calendar configuration file. Find the
                              line corresponding to each
                              <strong>School Id</strong>. Ensure that the
                              <code>BeginDate</code> and
                              <code>EndDate</code> for each
                              <code>SchoolYear</code> is accurate.
                              <ul>
                                <li>
                                  If a <strong>School Id</strong> is missing
                                  from the calendar configuration file, be sure
                                  to add it.
                                </li>
                              </ul>
                            </li>
                            <li>
                              Check the date information in the specified table
                              for accuracy.
                              <ul>
                                <li>
                                  Carefully check the ODS records in
                                  <strong>table</strong> specified by the error
                                  message for the specified
                                  <strong>School Id</strong>.
                                </li>
                                <li>
                                  Make sure there are no date entries that fall
                                  outside the school year information you have
                                  provided in the calendar configuration.
                                </li>
                                <li>
                                  If the table already has
                                  <code>SchoolYear</code> data (such as
                                  <code>edfi.Session</code> or
                                  <code>edfi.GradebookEntry</code>), make sure
                                  the <code>SchoolYear</code> data is accurate.
                                </li>
                              </ul>
                            </li>
                          </ol>
                          <p>Example:</p>
                          <div
                            class="code panel pdl conf-macro output-block"
                            style="border-width: 1px"
                            data-hasbody="true"
                            data-macro-name="code"
                            data-macro-id="2491a02b-77c4-45ff-83b7-14b933636576"
                          >
                            <div
                              class="codeHeader panelHeader pdl"
                              style="border-bottom-width: 1px"
                            >
                              <b
                                >Example Query:
                                <a
                                  href="/wiki/pages/createpage.action?spaceKey=EXCHANGE&amp;title=edfi&amp;linkCreation=true&amp;fromPageId=22492292"
                                  class="createlink"
                                  >edfi</a
                                >.<a
                                  href="/wiki/pages/createpage.action?spaceKey=EXCHANGE&amp;title=CalendarDate&amp;linkCreation=true&amp;fromPageId=22492292"
                                  class="createlink"
                                  >CalendarDate</a
                                ></b
                              >
                            </div>
                            <div class="codeContent panelContent pdl">
                              <div>
                                <div
                                  id="highlighter_720952"
                                  class="syntaxhighlighter sh-confluence nogutter sql"
                                >
                                  <div class="toolbar">
                                    <span
                                      ><a
                                        href="#"
                                        class="toolbar_item command_help help"
                                        >?</a
                                      ></span
                                    >
                                  </div>
                                  <table
                                    border="0"
                                    cellpadding="0"
                                    cellspacing="0"
                                  >
                                    <tbody>
                                      <tr>
                                        <td class="code">
                                          <div
                                            class="container"
                                            title="Hint: double-click to select code"
                                          >
                                            <div
                                              class="line number1 index0 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >SELECT</code
                                              >
                                              <code class="sql plain">*</code>
                                            </div>
                                            <div
                                              class="line number2 index1 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >FROM</code
                                              >
                                              <code class="sql plain"
                                                >[edfi].[CalendarDate]
                                              </code>
                                            </div>
                                            <div
                                              class="line number3 index2 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql keyword"
                                                >WHERE</code
                                              >
                                              <code class="sql plain"
                                                >[SchoolId] =
                                                {School_Id_from_error_message}</code
                                              >
                                            </div>
                                            <div
                                              class="line number4 index3 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql color1"
                                                >AND</code
                                              >
                                            </div>
                                            <div
                                              class="line number5 index4 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql plain">(</code>
                                            </div>
                                            <div
                                              class="line number6 index5 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql spaces"
                                                >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                              ><code class="sql plain">[</code
                                              ><code class="sql keyword"
                                                >Date</code
                                              ><code class="sql plain"
                                                >] &lt;
                                                {BeginDate_from_calendar_configuration_file}</code
                                              >
                                            </div>
                                            <div
                                              class="line number7 index6 alt2"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql spaces"
                                                >&nbsp;&nbsp;&nbsp;&nbsp;</code
                                              ><code class="sql color1"
                                                >OR</code
                                              >
                                              <code class="sql plain">[</code
                                              ><code class="sql keyword"
                                                >Date</code
                                              ><code class="sql plain"
                                                >] &gt;
                                                {EndDate_from_calendar_configuration_file}</code
                                              >
                                            </div>
                                            <div
                                              class="line number8 index7 alt1"
                                              data-bidi-marker="true"
                                            >
                                              <code class="sql plain">)</code>
                                            </div>
                                          </div>
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div>
                          <p><br /></p>
                          <p><br /></p>
                          <p><br /></p>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td class="confluenceTd">
                        <p>
                          <span
                            ><strong>SqlException:</strong><br />The constraint
                            '{CONSTRAINT_NAME_HERE}' is being referenced by
                            table '{TABLE_NAME_HERE}', foreign key constraint
                            '{FORIEGN_KEY_NAME_HERE}'</span
                          >
                        </p>
                        <p>or similar:</p>
                        <p>
                          The object <span>'{OBJECT_NAME_HERE}'</span> is
                          dependent on column <span>'{COLUMN_NAME_HERE}'</span>.
                        </p>
                      </td>
                      <td class="confluenceTd">
                        <p>
                          This type of unhandled SQL exception occurs when the
                          migration process tries to alter an item that is being
                          referenced by an external object, such as a foreign
                          key on another table, or schema-bound view.
                        </p>
                        <p><strong>Common causes</strong></p>
                        <ul>
                          <li>
                            The <code>--</code
                            ><span
                              ><code>BypassExtensionValidationCheck</code>
                              option was enabled, and the EdFi Migration script
                              tried to drop an index that is being referenced by
                              a foreign key on another schema.</span
                            >
                          </li>
                          <li>
                            <span
                              >There is a schema-bound view with a direct
                              dependency on a table that is being
                              modified.</span
                            >
                          </li>
                        </ul>
                      </td>
                      <td class="confluenceTd">
                        <div class="content-wrapper">
                          <p>
                            Make sure that you have dropped ALL foreign keys and
                            views from other schemas that have a dependency on
                            the <code>edfi</code> schema. This must be done by
                            adding custom migration scripts for your ODS, or by
                            dropping these items by hand.
                            <em
                              >Any external dependencies present will result in
                              a SQL exception.</em
                            >
                          </p>
                          <p>
                            You do not need to drop any constraints on the edfi
                            schema itself: This is handled automatically for
                            you.
                          </p>
                          <p>
                            For tips on locating foreign key dependencies
                            quickly, see the query in Step 8b. above.
                          </p>
                        </div>
                      </td>
                    </tr>
                    <tr role="row">
                      <td colspan="1" class="confluenceTd">
                        A data validation failure was encountered on destination
                        object&nbsp;{<em>table name here</em>} ...
                      </td>
                      <td colspan="1" class="confluenceTd">
                        Data was modified in a location that was not expected to
                        change. A validation check from script directory
                        <code
                          ><span
                            >Scripts/02 Setup/{version}/## Source Validation
                            Check</span
                          ></code
                        >
                        has failed.
                      </td>
                      <td colspan="1" class="confluenceTd">
                        <p>
                          This state is triggered if certain records are
                          modified in the middle of migration that the upgrade
                          utility expected would remain unchanged. The upgrade
                          will be halted for you as a precaution to prevent
                          unintended data loss.
                        </p>
                        <p><strong>Common Causes:</strong></p>
                        <ul>
                          <li>
                            Updates were made (either by hand or other means) in
                            the middle of the migration process after the data
                            compatibility checks passed.
                          </li>
                          <li>
                            Custom migration scripts performed an
                            insert/update/delete on an object that the migration
                            utility expects to remain unchanged by default.
                          </li>
                        </ul>
                        <p>
                          <strong
                            >If you are testing potential updates to the suite
                            2&nbsp;ODS data by hand (data only / no custom
                            scripts):</strong
                          >
                        </p>
                        <ul>
                          <li>
                            For testing of <strong>data</strong> updates only:
                            Simply restore the target suite 2 ODS and make the
                            desired inserts/updates/deletes before launching the
                            utility.
                            <ul>
                              <li>
                                <em
                                  >It is recommended to create your own custom
                                  migration scripts if testing more complex
                                  operations</em
                                >
                              </li>
                            </ul>
                          </li>
                          <li>
                            You should ensure that all suite 2 data updates have
                            been applied before the data compatibility check
                            passes.
                          </li>
                        </ul>
                        <p>
                          <strong
                            >If you are writing your own custom scripts:</strong
                          >
                        </p>
                        <ul>
                          <li>
                            Check the output of the table mentioned in the error
                            message carefully and ensure that the detected suite
                            3 change is as intended.
                          </li>
                          <li>
                            If the error references a table/column that you know
                            is intended to change during upgrade, you may
                            optionally remove the data validation check.
                          </li>
                        </ul>
                        <ul>
                          <li
                            style="
                              list-style-type: none;
                              background-image: none;
                            "
                          >
                            <ul>
                              <li>
                                These items can be found in directory<code>
                                  <span
                                    >Scripts/02 Setup/{version}/## Source
                                    Validation Check</span
                                  ></code
                                >
                              </li>
                              <li>
                                <em
                                  >It is not recommended to modify the edfi
                                  schema, as this may make upgrade tasks
                                  difficult in the future. By convention, custom
                                  tables are normally found in an outside
                                  location, such as the extension schema.</em
                                >
                              </li>
                            </ul>
                          </li>
                        </ul>
                        <p>
                          <span
                            ><strong
                              >If your suite 2 Ed-Fi ODS schema is unmodified,
                              and you are not making edits to the current
                              scripting or data, this error should not occur
                              during normal operation.
                            </strong></span
                          >
                        </p>
                        <ul>
                          <li>
                            <span
                              >Try the upgrade process again, and if the same
                              error occurs, you may have encountered a
                              bug.</span
                            >
                          </li>
                        </ul>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
